<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Big Five ì„±ê²© ê²€ì‚¬ (ë‹¨ì¼ íŒŒì¼ Â· ì˜¤í”„ë¼ì¸ ì‹¤í–‰)</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#0f1733;
      --card2:#111b3d;
      --text:#e9edf7;
      --muted:#aab4d6;
      --line:rgba(255,255,255,.08);
      --accent:#7aa2ff;
      --accent2:#79f2c0;
      --warn:#ffcc66;
      --danger:#ff6b6b;
      --shadow: 0 16px 60px rgba(0,0,0,.35);
      --radius: 18px;
      --radius2: 14px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Apple SD Gothic Neo","Noto Sans KR","Segoe UI", Roboto, Arial, "Helvetica Neue", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 900px at 15% 10%, rgba(122,162,255,.22), transparent 55%),
        radial-gradient(900px 900px at 85% 20%, rgba(121,242,192,.16), transparent 55%),
        radial-gradient(800px 600px at 40% 110%, rgba(255,204,102,.12), transparent 55%),
        linear-gradient(180deg, var(--bg), #070a16 60%, #050714);
      min-height:100vh;
      line-height:1.55;
    }
    a{color:inherit}
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 60px}
    header{
      position:sticky; top:0; z-index:30;
      background: linear-gradient(180deg, rgba(11,16,32,.92), rgba(11,16,32,.70), transparent);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding:18px 0 10px;
      margin:-18px 0 18px;
    }
    .top{
      display:flex;gap:16px;align-items:center;justify-content:space-between;
    }
    .brand{
      display:flex;gap:14px;align-items:center;
    }
    .logo{
      width:44px;height:44px;border-radius:14px;
      background: linear-gradient(135deg, rgba(122,162,255,.95), rgba(121,242,192,.95));
      box-shadow: 0 12px 35px rgba(122,162,255,.25);
      position:relative; overflow:hidden;
    }
    .logo:before{
      content:"";
      position:absolute; inset:-40%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.65), transparent 45%);
      transform: rotate(20deg);
      opacity:.9;
    }
    h1{
      font-size:18px;margin:0;
      letter-spacing:-.2px;
    }
    .sub{
      font-size:12.5px;color:var(--muted);margin-top:2px;
    }
    .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    button, .btn{
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      color:var(--text);
      border-radius: 14px;
      padding:10px 12px;
      cursor:pointer;
      transition: transform .06s ease, background .15s ease, border-color .15s ease;
      user-select:none;
      font-weight:600;
      letter-spacing:-.1px;
    }
    button:hover,.btn:hover{background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.14)}
    button:active,.btn:active{transform: translateY(1px)}
    button.primary{
      background: linear-gradient(135deg, rgba(122,162,255,.92), rgba(121,242,192,.84));
      border-color: transparent;
      color:#07101c;
      box-shadow: 0 14px 40px rgba(122,162,255,.16);
    }
    button.primary:hover{filter:brightness(1.03)}
    button.danger{
      background: rgba(255,107,107,.10);
      border-color: rgba(255,107,107,.25);
      color: #ffd3d3;
    }
    .grid{
      display:grid; gap:16px;
      grid-template-columns: 1.35fr .65fr;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
      header{position:relative}
    }
    .card{
      background: linear-gradient(180deg, rgba(15,23,51,.92), rgba(15,23,51,.86));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .inner{padding:16px}
    .card h2{
      margin:0 0 6px;
      font-size:15px;
      letter-spacing:-.2px;
    }
    .card p{margin:8px 0;color:var(--muted);font-size:13.5px}
    .hint{
      display:flex;gap:10px;align-items:flex-start;
      padding:12px 12px;
      border:1px dashed rgba(255,255,255,.16);
      border-radius: var(--radius2);
      background: rgba(255,255,255,.03);
      color:var(--muted);
      font-size:13px;
    }
    .hint b{color:var(--text)}
    .progressWrap{margin-top:12px}
    .progressRow{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .progressRow .pct{font-size:12px;color:var(--muted)}
    .bar{
      height:10px;border-radius: 999px; overflow:hidden;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
    }
    .bar > i{
      display:block;height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(122,162,255,.95), rgba(121,242,192,.90));
      border-radius: 999px;
      transition: width .25s ease;
    }

    .qCard{padding:0}
    .qHead{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:14px 16px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(17,27,61,.75), rgba(17,27,61,.25));
    }
    .qHead .left{display:flex;align-items:center;gap:10px}
    .pill{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:var(--muted);
      white-space:nowrap;
    }
    .pill.ok{border-color: rgba(121,242,192,.25); background: rgba(121,242,192,.10); color:#c8ffee}
    .pill.bad{border-color: rgba(255,107,107,.25); background: rgba(255,107,107,.10); color:#ffd1d1}
    .qList{padding:10px 12px 16px}
    .qItem{
      margin:10px 0;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.02);
      border-radius: 14px;
      overflow:hidden;
    }
    .qTitle{
      display:flex;gap:10px;align-items:flex-start;
      padding:12px 12px 10px;
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .qNum{
      width:28px; height:28px; border-radius: 10px;
      display:grid; place-items:center;
      background: rgba(122,162,255,.14);
      border:1px solid rgba(122,162,255,.18);
      color:#dbe6ff;
      font-weight:700;
      flex:0 0 auto;
    }
    .qText{font-size:14.5px;color:var(--text);margin:0}
    .qSub{font-size:12.5px;color:var(--muted);margin-top:4px}
    .opts{
      display:grid;
      grid-template-columns: repeat(5, minmax(0,1fr));
      gap:8px;
      padding:10px 12px 12px;
    }
    @media (max-width: 640px){
      .opts{grid-template-columns: 1fr}
    }
    label.opt{
      display:flex; gap:10px; align-items:center;
      padding:10px 10px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.09);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      transition: background .15s ease, border-color .15s ease, transform .06s ease;
      font-size:13px;
      color: var(--muted);
      user-select:none;
    }
    label.opt:hover{background: rgba(255,255,255,.05); border-color: rgba(255,255,255,.14)}
    label.opt:active{transform: translateY(1px)}
    input[type="radio"]{accent-color: var(--accent); transform: translateY(1px)}
    label.opt.selected{
      color: var(--text);
      border-color: rgba(121,242,192,.30);
      background: rgba(121,242,192,.10);
    }

    .side .card{position:sticky; top:86px}
    @media (max-width: 980px){
      .side .card{position:static}
    }

    .scoreGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top:10px;
    }
    .metric{
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.02);
      border-radius: 14px;
      padding:12px 12px;
    }
    .metric .row{display:flex;justify-content:space-between;gap:10px;align-items:baseline}
    .metric .name{font-weight:700;letter-spacing:-.2px}
    .metric .val{font-size:12.5px;color:var(--muted)}
    .meter{
      margin-top:8px;
      height:10px;border-radius: 999px; overflow:hidden;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
    }
    .meter i{
      display:block;height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(122,162,255,.95), rgba(121,242,192,.90));
      border-radius: 999px;
      transition: width .35s ease;
    }

    .result{
      display:none;
      margin-top:16px;
    }
    .result .inner{padding:16px}
    .report{
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.02);
      border-radius: 14px;
      padding:14px 14px;
      color: var(--text);
      font-size:14px;
      white-space:pre-wrap;
    }
    .small{
      font-size:12.5px;color:var(--muted);
    }
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      background: rgba(15,23,51,.92);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 50px rgba(0,0,0,.38);
      border-radius: 999px;
      padding:10px 14px;
      display:none;
      z-index:40;
      max-width:min(92vw, 700px);
      color: var(--text);
      font-size:13px;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 8px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: var(--text);
    }
    footer{margin-top:18px;color:var(--muted);font-size:12.5px}
    .divider{height:1px;background:rgba(255,255,255,.08);margin:12px 0}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="top">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>Big Five ì„±ê²© ê²€ì‚¬ Â· ì˜¤í”„ë¼ì¸ ë‹¨ì¼ íŒŒì¼</h1>
            <div class="sub">HTML5 Â· CSS3 Â· Vanilla JS Â· ì„œë²„/ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ ì‹¤í–‰</div>
          </div>
        </div>
        <div class="actions">
          <button id="btnAutofill" class="btn" type="button" title="ë°ëª¨ìš©ìœ¼ë¡œ ì„ì˜ ì‘ë‹µì„ ì±„ì›ë‹ˆë‹¤">ë°ëª¨ ì±„ìš°ê¸°</button>
          <button id="btnReset" class="danger" type="button">ì´ˆê¸°í™”</button>
          <button id="btnSubmit" class="primary" type="button">ì œì¶œ</button>
        </div>
      </div>

      <div class="progressWrap">
        <div class="progressRow">
          <div class="sub">ì§„í–‰ë¥  <span class="kbd">1~5</span> ì„ íƒ</div>
          <div class="pct" id="progressText">0 / 20</div>
        </div>
        <div class="bar" aria-hidden="true"><i id="progressBar"></i></div>
      </div>
    </header>

    <div class="grid">
      <main class="main">
        <section class="card">
          <div class="inner">
            <h2>ì•ˆë‚´</h2>
            <p>
              ì•„ë˜ 20ë¬¸í•­ì€ <b>5ìš”ì¸ ëª¨ë¸(Big Five)</b>ì„ ì°¸ê³ í•´ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
              ê° ë¬¸í•­ì€ â€œìµœê·¼ 6ê°œì›”ì˜ ë‹¹ì‹ â€ì„ ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ ê°€ê¹ë‹¤ê³  ëŠë¼ëŠ” ì„ íƒì§€ë¥¼ ê³ ë¥´ì„¸ìš”.
              (ì´ ê²€ì‚¬ëŠ” ìê¸°ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ì°¸ê³ ìš©ì´ë©°, ì„ìƒì  ì§„ë‹¨ ë„êµ¬ê°€ ì•„ë‹™ë‹ˆë‹¤.)
            </p>
            <div class="hint">
              <div>ğŸ’¡</div>
              <div>
                <b>íŒ</b> Â· ë„ˆë¬´ ì˜¤ë˜ ê³ ë¯¼í•˜ê¸°ë³´ë‹¤ â€œí‰ì†Œì— ë” ìì£¼ ë‚˜ì˜¤ëŠ” ëª¨ìŠµâ€ì„ ì„ íƒí•˜ë©´ ì •í™•ë„ê°€ ì˜¬ë¼ê°€ìš”.
                ëª¨ë“  ê³„ì‚°ê³¼ ë¦¬í¬íŠ¸ ìƒì„±ì€ <b>ë¸Œë¼ìš°ì € ë‚´ë¶€ì—ì„œë§Œ</b> ì´ë£¨ì–´ì§€ë©°, ì™¸ë¶€ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
              </div>
            </div>
          </div>
        </section>

        <section class="card qCard" style="margin-top:16px">
          <div class="qHead">
            <div class="left">
              <h2 style="margin:0;font-size:15px">ë¬¸í•­</h2>
              <span class="pill" id="answerPill">ë¯¸ì‘ë‹µ ìˆìŒ</span>
            </div>
            <span class="pill" title="Big Five: O(ê°œë°©ì„±) C(ì„±ì‹¤ì„±) E(ì™¸í–¥ì„±) A(ì¹œí™”ì„±) N(ì‹ ê²½ì„±)">ìš”ì¸: O Â· C Â· E Â· A Â· N</span>
          </div>
          <div class="qList" id="questionList"></div>
        </section>

        <section class="card result" id="resultCard">
          <div class="inner">
            <h2>ì‹¬ì¸µ ë¦¬í¬íŠ¸</h2>
            <p class="small" id="resultMeta"></p>
            <div class="report" id="reportBox"></div>
            <div class="divider"></div>
            <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end">
              <button class="btn" id="btnCopy" type="button">ë¦¬í¬íŠ¸ ë³µì‚¬</button>
              <button class="btn" id="btnDownloadTxt" type="button">TXTë¡œ ì €ì¥</button>
              <button class="btn" id="btnPrint" type="button">ì¸ì‡„</button>
            </div>
          </div>
        </section>

        <footer>
          <div class="divider"></div>
          <div>Â© ë‹¨ì¼ íŒŒì¼ ë°ëª¨. ë¬¸í•­ê³¼ í•´ì„ ë¡œì§ì€ êµìœ¡/ìê¸°ì´í•´ ëª©ì ì˜ ì˜ˆì‹œì´ë©°, ì „ë¬¸ ìƒë‹´/ì§„ë‹¨ì„ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
        </footer>
      </main>

      <aside class="side">
        <section class="card">
          <div class="inner">
            <h2>ìš”ì¸ ì ìˆ˜ ìš”ì•½</h2>
            <p>ê° ìš”ì¸ì€ 4ë¬¸í•­ìœ¼ë¡œ ì¸¡ì •ë˜ë©°, ì¼ë¶€ ë¬¸í•­ì€ ë°˜ëŒ€ë¡œ ì±„ì ë©ë‹ˆë‹¤. (0~100ìœ¼ë¡œ í™˜ì‚°)</p>
            <div class="scoreGrid" id="scoreGrid"></div>
            <div class="divider"></div>
            <p class="small">
              ì°¸ê³ : â€œë†’ìŒ/ë³´í†µ/ë‚®ìŒâ€ êµ¬ë¶„ì€ í‘œì¤€í™” ê·œì¤€ì´ ì•„ë‹ˆë¼, ì´ ê²€ì‚¬ ë‚´ ì ìˆ˜ ë²”ìœ„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ê°„ì´ ê¸°ì¤€ì…ë‹ˆë‹¤.
            </p>
          </div>
        </section>
      </aside>
    </div>
  </div>

  <div class="toast" id="toast"></div>

<script>
(() => {
  "use strict";

  // ====== ì„¤ë¬¸ êµ¬ì„± (20ë¬¸í•­ / 5ì  ì²™ë„ / Big Five ê¸°ë°˜) ======
  // traits: O(ê°œë°©ì„±), C(ì„±ì‹¤ì„±), E(ì™¸í–¥ì„±), A(ì¹œí™”ì„±), N(ì‹ ê²½ì„±)
  // reverse: trueë©´ ì—­ì±„ì  (6 - ì„ íƒê°’)
  const QUESTIONS = [
    // O (ê°œë°©ì„±)
    { id: 1, trait:"O", reverse:false, text:"ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë‚˜ ë‚¯ì„  ë°©ì‹ì— í˜¸ê¸°ì‹¬ì´ ìƒê¸°ë©´ ì§ì ‘ ì‹œë„í•´ ë³´ëŠ” í¸ì´ë‹¤.", sub:"ë³€í™”ì™€ íƒìƒ‰ ì„ í˜¸(ê°œë°©ì„±)" },
    { id: 2, trait:"O", reverse:false, text:"ì˜ˆìˆ Â·ë¬¸í™”Â·ì² í•™ ê°™ì€ ì¶”ìƒì  ì£¼ì œì— ëŒ€í•´ ìƒê°í•˜ê±°ë‚˜ ëŒ€í™”í•˜ëŠ” ê²ƒì„ ì¦ê¸´ë‹¤.", sub:"ê´€ì  í™•ì¥Â·ìƒìƒë ¥" },
    { id: 3, trait:"O", reverse:true,  text:"ìµìˆ™í•œ ê·œì¹™ì—ì„œ ë²—ì–´ë‚œ ë°©ë²•ì€ ëŒ€ì²´ë¡œ ë¶ˆí¸í•˜ê³  í”¼í•˜ê³  ì‹¶ë‹¤.", sub:"ìƒˆë¡œì›€ì— ëŒ€í•œ ë¶ˆí¸ê°(ì—­ë¬¸í•­)" },
    { id: 4, trait:"O", reverse:true,  text:"ë¬¸ì œê°€ ìƒê¸°ë©´ â€˜ëŠ˜ í•´ì˜¤ë˜ ë°©ì‹â€™ì´ ì œì¼ ì•ˆì „í•˜ë‹¤ê³  ëŠë‚€ë‹¤.", sub:"ê´€ì„±/ë³´ìˆ˜ì„±(ì—­ë¬¸í•­)" },

    // C (ì„±ì‹¤ì„±)
    { id: 5, trait:"C", reverse:false, text:"ëª©í‘œë¥¼ ì„¸ìš°ë©´ ë§ˆê°ê³¼ ì ˆì°¨ë¥¼ ì •í•´ ê¾¸ì¤€íˆ ì‹¤í–‰í•˜ë ¤ê³  í•œë‹¤.", sub:"ê³„íšÂ·ì§€ì†" },
    { id: 6, trait:"C", reverse:false, text:"ì‹¤ìˆ˜ ê°€ëŠ¥ì„±ì„ ì¤„ì´ê¸° ìœ„í•´ ì²´í¬ë¦¬ìŠ¤íŠ¸ë‚˜ ì •ë¦¬ ìŠµê´€ì„ ë§Œë“ ë‹¤.", sub:"ì²´ê³„í™”Â·ì ê²€" },
    { id: 7, trait:"C", reverse:true,  text:"í•´ì•¼ í•  ì¼ì„ ë¯¸ë£¨ë‹¤ ë§ˆì§€ë§‰ì— ê¸‰í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ì¼ì´ ì¦ë‹¤.", sub:"ì§€ì—°/ì¦‰í¥ ì²˜ë¦¬(ì—­ë¬¸í•­)" },
    { id: 8, trait:"C", reverse:true,  text:"ì •ë¦¬ì •ëˆì´ë‚˜ ì‹œê°„ê´€ë¦¬ê°€ ì „ë°˜ì ìœ¼ë¡œ ì˜ ì•ˆ ë˜ëŠ” í¸ì´ë‹¤.", sub:"ì •ëˆÂ·ê´€ë¦¬ ì–´ë ¤ì›€(ì—­ë¬¸í•­)" },

    // E (ì™¸í–¥ì„±)
    { id: 9,  trait:"E", reverse:false, text:"ì‚¬ëŒì´ ìˆëŠ” ìë¦¬ì—ì„œ ì—ë„ˆì§€ê°€ ì¶©ì „ë˜ëŠ” ëŠë‚Œì´ ë“ ë‹¤.", sub:"ì‚¬íšŒì  ì—ë„ˆì§€" },
    { id:10,  trait:"E", reverse:false, text:"ìƒˆë¡œìš´ ì‚¬ëŒì—ê²Œ ë¨¼ì € ë§ì„ ê±¸ê±°ë‚˜ ë¶„ìœ„ê¸°ë¥¼ ë„ìš°ëŠ” í¸ì´ë‹¤.", sub:"ì£¼ë„ì„±Â·í™œë ¥" },
    { id:11,  trait:"E", reverse:true,  text:"ì—¬ëŸ¿ê³¼ ì˜¤ë˜ í•¨ê»˜ ìˆìœ¼ë©´ ê¸ˆë°© ì§€ì¹˜ê³  í˜¼ìë§Œì˜ ì‹œê°„ì´ ê¼­ í•„ìš”í•˜ë‹¤.", sub:"ì‚¬íšŒì  í”¼ë¡œ(ì—­ë¬¸í•­)" },
    { id:12,  trait:"E", reverse:true,  text:"ë‚´ ì˜ê²¬ì„ ê³µê°œì ìœ¼ë¡œ ë§í•˜ê¸°ë³´ë‹¤ ì¡°ìš©íˆ ê´€ì°°í•˜ëŠ” í¸ì´ ë” í¸í•˜ë‹¤.", sub:"í‘œí˜„ ì–µì œ(ì—­ë¬¸í•­)" },

    // A (ì¹œí™”ì„±)
    { id:13, trait:"A", reverse:false, text:"ìƒëŒ€ì˜ ì…ì¥ì„ ë¨¼ì € ì´í•´í•˜ë ¤ê³  í•˜ê³ , ë§íˆ¬ë‚˜ í‘œí˜„ì„ ë°°ë ¤í•œë‹¤.", sub:"ê³µê°Â·ë°°ë ¤" },
    { id:14, trait:"A", reverse:false, text:"ê°ˆë“±ì´ ìƒê¸°ë©´ â€˜ì´ê¸°ê¸°â€™ë³´ë‹¤ â€˜ê´€ê³„ë¥¼ ì§€í‚¤ëŠ” í•´ê²°â€™ì„ ì„ í˜¸í•œë‹¤.", sub:"í˜‘ë ¥Â·ì¡°ì •" },
    { id:15, trait:"A", reverse:true,  text:"ìƒëŒ€ê°€ ì‹¤ìˆ˜í•˜ë©´ ë§ˆìŒì†ìœ¼ë¡œ ì‰½ê²Œ í‰ê°€í•˜ê±°ë‚˜ íŒë‹¨í•˜ëŠ” í¸ì´ë‹¤.", sub:"ë¹„íŒ/ê²½ìŸ(ì—­ë¬¸í•­)" },
    { id:16, trait:"A", reverse:true,  text:"í˜‘ì—…ì—ì„œ íƒ€ì¸ì˜ ìš”ì²­ì„ ë“¤ì–´ì£¼ëŠ” ê²ƒë³´ë‹¤ ë‚´ ë°©ì‹ëŒ€ë¡œ ê°€ëŠ” í¸ì´ ë‚«ë‹¤.", sub:"ë…ë¦½/ë¹„í˜‘ì¡°(ì—­ë¬¸í•­)" },

    // N (ì‹ ê²½ì„±; ì •ì„œì  ë¶ˆì•ˆì •)
    { id:17, trait:"N", reverse:false, text:"ì‘ì€ ì¼ì—ë„ ê±±ì •ì´ ê¸¸ì–´ì ¸ ë¨¸ë¦¿ì†ì—ì„œ ê³„ì† ë§´ë„ëŠ” í¸ì´ë‹¤.", sub:"ê±±ì •Â·ë°˜ì¶”" },
    { id:18, trait:"N", reverse:false, text:"ì˜ˆìƒì¹˜ ëª»í•œ ë³€í™”ê°€ ìƒê¸°ë©´ ê¸´ì¥ì´ë‚˜ ë¶ˆì•ˆì´ ë¹ ë¥´ê²Œ ì˜¬ë¼ì˜¨ë‹¤.", sub:"ë¶ˆí™•ì‹¤ì„± ë¯¼ê°" },
    { id:19, trait:"N", reverse:true,  text:"ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì•„ë„ ê°ì •ì´ í¬ê²Œ í”ë“¤ë¦¬ì§€ ì•Šê³  ë¹„êµì  ë¹¨ë¦¬ ì•ˆì •ëœë‹¤.", sub:"ì •ì„œì  íšŒë³µ(ì—­ë¬¸í•­)" },
    { id:20, trait:"N", reverse:true,  text:"ë¹„íŒì´ë‚˜ ê±°ì ˆì„ ê²ªì–´ë„ í¬ê²Œ ê°œì¸ì ìœ¼ë¡œ ë°›ì•„ë“¤ì´ì§€ ì•ŠëŠ” í¸ì´ë‹¤.", sub:"ìê¸°ë°©ì–´Â·íƒ„ë ¥ì„±(ì—­ë¬¸í•­)" },
  ];

  const TRAITS = {
    O: { name:"ê°œë°©ì„±(O)", desc:"ìƒˆë¡œì›€Â·í˜¸ê¸°ì‹¬Â·ìƒìƒë ¥Â·ê´€ì  ì „í™˜" },
    C: { name:"ì„±ì‹¤ì„±(C)", desc:"ê³„íšì„±Â·ìê¸°í†µì œÂ·ì±…ì„ê°Â·ê¾¸ì¤€í•¨" },
    E: { name:"ì™¸í–¥ì„±(E)", desc:"í™œë ¥Â·ì‚¬íšŒì  ì—ë„ˆì§€Â·í‘œí˜„Â·ì£¼ë„ì„±" },
    A: { name:"ì¹œí™”ì„±(A)", desc:"ê³µê°Â·í˜‘ë ¥Â·ì‹ ë¢°Â·ë°°ë ¤" },
    N: { name:"ì‹ ê²½ì„±(N)", desc:"ê±±ì •Â·ë¶ˆì•ˆ ë¯¼ê°ë„Â·ì •ì„œ ë³€ë™ì„±" },
  };

  const SCALE_LABELS = ["ì „í˜€ ì•„ë‹ˆë‹¤(1)", "ì•„ë‹ˆë‹¤(2)", "ë³´í†µì´ë‹¤(3)", "ê·¸ë ‡ë‹¤(4)", "ë§¤ìš° ê·¸ë ‡ë‹¤(5)"];

  // ====== DOM ======
  const $ = (q, el=document) => el.querySelector(q);
  const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));

  const qList = $("#questionList");
  const scoreGrid = $("#scoreGrid");
  const progressText = $("#progressText");
  const progressBar = $("#progressBar");
  const answerPill = $("#answerPill");
  const resultCard = $("#resultCard");
  const reportBox = $("#reportBox");
  const resultMeta = $("#resultMeta");
  const toast = $("#toast");

  // ====== ìœ í‹¸ ======
  const clamp = (v, a, b) => Math.min(b, Math.max(a, v));

  function showToast(msg){
    toast.textContent = msg;
    toast.style.display = "block";
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> toast.style.display="none", 2400);
  }

  function traitLevel(pct){
    // ê°„ì´ ê¸°ì¤€: 0~39 ë‚®ìŒ, 40~69 ë³´í†µ, 70~100 ë†’ìŒ
    if (pct >= 70) return "ë†’ìŒ";
    if (pct >= 40) return "ë³´í†µ";
    return "ë‚®ìŒ";
  }

  function levelEmoji(level){
    return level==="ë†’ìŒ" ? "â–²" : level==="ë‚®ìŒ" ? "â–¼" : "â—";
  }

  function fmt1(n){ return (Math.round(n*10)/10).toFixed(1); }

  // ====== ë Œë”ë§ ======
  function renderQuestions(){
    qList.innerHTML = "";
    const frag = document.createDocumentFragment();

    QUESTIONS.forEach(q => {
      const item = document.createElement("div");
      item.className = "qItem";
      item.dataset.qid = String(q.id);

      const title = document.createElement("div");
      title.className = "qTitle";
      title.innerHTML = `
        <div class="qNum">${q.id}</div>
        <div>
          <p class="qText">${escapeHtml(q.text)}</p>
          <div class="qSub">${escapeHtml(q.sub)} Â· ìš”ì¸: <b>${q.trait}</b>${q.reverse ? " Â· <span style='color:#ffd1d1'>ì—­ì±„ì </span>" : ""}</div>
        </div>
      `;

      const opts = document.createElement("div");
      opts.className = "opts";

      for (let v=1; v<=5; v++){
        const id = `q${q.id}_${v}`;
        const label = document.createElement("label");
        label.className = "opt";
        label.setAttribute("for", id);
        label.innerHTML = `
          <input id="${id}" type="radio" name="q${q.id}" value="${v}" />
          <span>${SCALE_LABELS[v-1]}</span>
        `;
        opts.appendChild(label);
      }

      item.appendChild(title);
      item.appendChild(opts);
      frag.appendChild(item);
    });

    qList.appendChild(frag);

    // ë¼ë²¨ ì„ íƒ í‘œì‹œ
    qList.addEventListener("change", (e) => {
      const input = e.target;
      if (!input || input.type !== "radio") return;

      const box = input.closest(".qItem");
      if (!box) return;

      // ì´ ë¬¸í•­ì˜ ë¼ë²¨ ìƒíƒœ ê°±ì‹ 
      $$(".opt", box).forEach(l => l.classList.remove("selected"));
      const selectedLabel = input.closest("label.opt");
      if (selectedLabel) selectedLabel.classList.add("selected");

      updateProgress();
      // ì €ì¥
      persistAnswers();
    });
  }

  function renderScoresEmpty(){
    scoreGrid.innerHTML = "";
    const frag = document.createDocumentFragment();
    for (const k of Object.keys(TRAITS)){
      const m = document.createElement("div");
      m.className = "metric";
      m.dataset.trait = k;
      m.innerHTML = `
        <div class="row">
          <div class="name">${TRAITS[k].name}</div>
          <div class="val"><span class="pct">-</span> Â· <span class="lvl">-</span></div>
        </div>
        <div class="meter"><i></i></div>
        <div class="small" style="margin-top:8px">${TRAITS[k].desc}</div>
      `;
      frag.appendChild(m);
    }
    scoreGrid.appendChild(frag);
  }

  function updateScoreUI(traitToPct){
    $$(".metric", scoreGrid).forEach(el => {
      const t = el.dataset.trait;
      const pct = traitToPct[t] ?? 0;
      const lvl = traitLevel(pct);
      $(".pct", el).textContent = `${fmt1(pct)}ì `;
      $(".lvl", el).textContent = `${levelEmoji(lvl)} ${lvl}`;
      $("i", el).style.width = `${clamp(pct,0,100)}%`;
    });
  }

  function updateProgress(){
    const answered = countAnswered();
    progressText.textContent = `${answered} / ${QUESTIONS.length}`;
    progressBar.style.width = `${(answered / QUESTIONS.length) * 100}%`;

    const ok = answered === QUESTIONS.length;
    answerPill.textContent = ok ? "ëª¨ë‘ ì‘ë‹µ" : "ë¯¸ì‘ë‹µ ìˆìŒ";
    answerPill.className = "pill " + (ok ? "ok" : "bad");
  }

  function countAnswered(){
    let n = 0;
    for (const q of QUESTIONS){
      if ($(`input[name="q${q.id}"]:checked`)) n++;
    }
    return n;
  }

  // ====== ì ìˆ˜ ê³„ì‚° ======
  function computeScores(){
    // raw: ê° ìš”ì¸ 4~20
    const raw = {O:0,C:0,E:0,A:0,N:0};
    const detail = []; // ë¬¸í•­ë³„ ì ìˆ˜
    for (const q of QUESTIONS){
      const checked = $(`input[name="q${q.id}"]:checked`);
      if (!checked) return null;
      const v = Number(checked.value);
      const scored = q.reverse ? (6 - v) : v;
      raw[q.trait] += scored;
      detail.push({qid:q.id, trait:q.trait, v, scored, reverse:q.reverse});
    }
    const pct = {};
    for (const t of Object.keys(raw)){
      // 4~20 -> 0~100
      pct[t] = ((raw[t] - 4) / 16) * 100;
      pct[t] = clamp(pct[t], 0, 100);
    }
    return {raw, pct, detail};
  }

  // ====== ë¦¬í¬íŠ¸ ìƒì„± ======
  function buildReport(scores){
    const {raw, pct} = scores;

    const lv = {
      O: traitLevel(pct.O),
      C: traitLevel(pct.C),
      E: traitLevel(pct.E),
      A: traitLevel(pct.A),
      N: traitLevel(pct.N),
    };

    // ê°„ë‹¨ ì§€í‘œ(ìƒí˜¸ì‘ìš©ìš©)
    const socialDrive = (pct.E*0.55 + pct.A*0.45);
    const execution = (pct.C*0.70 + (100-pct.N)*0.30);
    const creativity = (pct.O*0.70 + pct.E*0.30);
    const harmony = (pct.A*0.65 + (100-pct.N)*0.35);
    const riskOfBurnout = (pct.C*0.55 + pct.N*0.45);

    const style = classifyProfile(pct);
    const tags = buildKeywords(pct, style);

    // ìš”ì¸ë³„ ë¬¸ì¥
    const traitSection = [
      traitParagraph("O", pct.O, lv.O),
      traitParagraph("C", pct.C, lv.C),
      traitParagraph("E", pct.E, lv.E),
      traitParagraph("A", pct.A, lv.A),
      traitParagraph("N", pct.N, lv.N),
    ].join("\n\n");

    const interactionSection = interactionParagraphs(pct, lv, {socialDrive, execution, creativity, harmony, riskOfBurnout});

    const suggestions = developmentSuggestions(pct, lv, style);

    const now = new Date();
    const stamp = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,"0")}-${String(now.getDate()).padStart(2,"0")} ${String(now.getHours()).padStart(2,"0")}:${String(now.getMinutes()).padStart(2,"0")}`;

    const summary = `
[ìš”ì•½ í”„ë¡œí•„]
- ë‹¹ì‹ ì˜ ì „ë°˜ì  ê²½í–¥ì€ â€œ${style.title}â€ì— ê°€ê¹ìŠµë‹ˆë‹¤.
- í•µì‹¬ í‚¤ì›Œë“œ: ${tags.join(" Â· ")}
- ê°„ì´ ì§€í‘œ(0~100): ì‚¬íšŒì  ì¶”ì§„ë ¥ ${fmt1(socialDrive)}, ì‹¤í–‰/íšŒë³µ ${fmt1(execution)}, ì°½ì˜Â·íƒìƒ‰ ${fmt1(creativity)}, ê´€ê³„ ì•ˆì •ê° ${fmt1(harmony)}, ê³¼ë¶€í•˜ ìœ„í—˜ ${fmt1(riskOfBurnout)}

ì´ ê²€ì‚¬ëŠ” Big Five(ê°œë°©ì„±Â·ì„±ì‹¤ì„±Â·ì™¸í–¥ì„±Â·ì¹œí™”ì„±Â·ì‹ ê²½ì„±)ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ìµœê·¼ 6ê°œì›”ì˜ â€˜ë°˜ë³µë˜ëŠ” í–‰ë™ íŒ¨í„´â€™ì„ ì¶”ì •í•©ë‹ˆë‹¤.
ì ìˆ˜ëŠ” â€œì¢‹ê³  ë‚˜ì¨â€ì´ ì•„ë‹ˆë¼ â€œì—ë„ˆì§€ì˜ ë°©í–¥â€ì— ê°€ê¹ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ê°œë°©ì„±ì´ ë†’ìœ¼ë©´ ìƒˆë¡œì›€ì„ ì¦ê¸°ì§€ë§Œ, ë°˜ëŒ€ë¡œ ìµìˆ™í•œ ì²´ê³„ì—ì„œëŠ” ì§€ë£¨í•¨ì„ ëŠë‚„ ìˆ˜ ìˆì–´ìš”. ì„±ì‹¤ì„±ì´ ë†’ìœ¼ë©´ ì‹ ë¢°ë¥¼ ì–»ì§€ë§Œ, ì™„ë²½ì£¼ì˜ë¡œ ì´ì–´ì§€ë©´ í”¼ë¡œê°€ ëŠ˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`.trim();

    const socialAttitude = socialAttitudeParagraph(pct, lv, style);
    const workLearning = workLearningParagraph(pct, lv, style);
    const potential = potentialParagraph(pct, lv, style);
    const caution = cautionParagraph(pct, lv, style);

    const closing = `
[ë§ˆë¬´ë¦¬]
ì§€ê¸ˆ ë‚˜ì˜¨ ê²°ê³¼ëŠ” â€œí˜„ì¬ì˜ ìŠµê´€ì  ì„ íƒâ€ì„ ìš”ì•½í•œ ì§€ë„ ê°™ì€ ê²ƒì…ë‹ˆë‹¤. ì‚¬ëŒì€ í™˜ê²½Â·ì—­í• Â·íšŒë³µ ìƒíƒœì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.
ë§Œì•½ ê²°ê³¼ê°€ ë‚¯ì„¤ê²Œ ëŠê»´ì§„ë‹¤ë©´, (1) ìµœê·¼ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë†’ì•˜ëŠ”ì§€, (2) ì¼/í•™ì—…/ê´€ê³„ì—ì„œ ìš”êµ¬ë˜ëŠ” ì—­í• ì´ ë°”ë€Œì—ˆëŠ”ì§€, (3) ì¶©ë¶„íˆ ì‰¬ê³  ìˆëŠ”ì§€ë¶€í„° ì ê²€í•´ ë³´ì„¸ìš”.
ì›í•œë‹¤ë©´ ê°™ì€ ë¬¸í•­ì„ 2~3ì£¼ ê°„ê²©ìœ¼ë¡œ ë‹¤ì‹œ í•´ë³´ê³ , ì ìˆ˜ê°€ ì–´ë–»ê²Œ ì›€ì§ì´ëŠ”ì§€ ê´€ì°°í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ìê¸°ì´í•´ ë°©ë²•ì…ë‹ˆë‹¤.
`.trim();

    // 1000ì ì´ìƒì„ ë³´ì¥í•˜ê¸° ìœ„í•´(ì¡°ê±´ë¬¸ì´ ì§§ê²Œ ë‚˜ì˜¬ ê°€ëŠ¥ì„± ëŒ€ë¹„) ê¸°ë³¸ ì„¤ëª… ë¸”ë¡ì„ ì¶”ê°€
    const baseline = `
[í•´ì„ì— ëŒ€í•œ ì§§ì€ ì°¸ê³ ]
- â€œë†’ìŒ/ë³´í†µ/ë‚®ìŒâ€ì€ ì´ ê²€ì‚¬ ë‚´ ì ìˆ˜ êµ¬ê°„ìœ¼ë¡œ ë‚˜ëˆˆ ê°„ì´ ë¶„ë¥˜ì´ë©°, ì ˆëŒ€ì ì¸ ìš°ì—´ì„ ëœ»í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- í•œ ìš”ì¸ì´ ë†’ì„ìˆ˜ë¡ â€˜ê·¸ ìš”ì¸ì´ í•„ìš”í•œ ìƒí™©ì—ì„œ ê°•ì ì´ ì˜ ë°œíœ˜â€™ë˜ì§€ë§Œ, ë°˜ëŒ€ë¡œ ê³¼ì‚¬ìš©í•˜ë©´ ë¹„ìš©(í”¼ë¡œÂ·ê°ˆë“±Â·ê²½ì§)ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì„±ê²©ì€ ê³ ì •ëœ ë¼ë²¨ì´ë¼ê¸°ë³´ë‹¤, ë‹¹ì‹ ì´ ìì£¼ ì„ íƒí•´ ì˜¨ ë°©ì‹ì˜ í‰ê· ì— ê°€ê¹ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ëª©í‘œ(ì˜ˆ: ë” ì¹¨ì°©í•´ì§€ê¸°, ë” ì‹¤í–‰í•˜ê¸°, ë” í‘œí˜„í•˜ê¸°)ì— ë”°ë¼ í›ˆë ¨ìœ¼ë¡œ ì¡°ì •ë˜ëŠ” ë¶€ë¶„ì´ ë§ìŠµë‹ˆë‹¤.
`.trim();

    const scoreTable = `
[ì ìˆ˜(0~100)]
- ê°œë°©ì„±(O): ${fmt1(pct.O)} Â· ${lv.O}
- ì„±ì‹¤ì„±(C): ${fmt1(pct.C)} Â· ${lv.C}
- ì™¸í–¥ì„±(E): ${fmt1(pct.E)} Â· ${lv.E}
- ì¹œí™”ì„±(A): ${fmt1(pct.A)} Â· ${lv.A}
- ì‹ ê²½ì„±(N): ${fmt1(pct.N)} Â· ${lv.N}
`.trim();

    const report = [
      `ë¦¬í¬íŠ¸ ìƒì„± ì‹œê°: ${stamp}`,
      scoreTable,
      summary,
      "\n[ìš”ì¸ë³„ ì‹¬ì¸µ í•´ì„]\n" + traitSection,
      "\n[ìš”ì¸ ê°„ ìƒí˜¸ì‘ìš© ë¶„ì„]\n" + interactionSection,
      "\n[ì‚¬íšŒì  íƒœë„/ëŒ€ì¸ê´€ê³„]\n" + socialAttitude,
      "\n[ì—…ë¬´Â·í•™ìŠµ ìŠ¤íƒ€ì¼]\n" + workLearning,
      "\n[ì ì¬ ì—­ëŸ‰]\n" + potential,
      "\n[ì£¼ì˜ ì‹ í˜¸(ìŠ¤íŠ¸ë ˆìŠ¤/ë¶€í•˜)]\n" + caution,
      "\n[ìê¸°ê³„ë°œ ì œì–¸(ì‹¤í–‰ ê°€ëŠ¥í•œ ë£¨í‹´)]\n" + suggestions,
      "\n" + baseline,
      "\n" + closing
    ].join("\n\n");

    return {report, stamp, style, tags, indices:{socialDrive, execution, creativity, harmony, riskOfBurnout}};
  }

  function classifyProfile(pct){
    // ëª‡ ê°€ì§€ ëŒ€í‘œ ì¡°í•©ìœ¼ë¡œ â€œí”„ë¡œí•„â€ ë¼ë²¨ë§(ê°„ì´)
    const O = pct.O, C=pct.C, E=pct.E, A=pct.A, N=pct.N;

    // ê²°ì • íŠ¸ë¦¬(ê°€ë…ì„± ìš°ì„ )
    if (C>=70 && N<40) return { title:"ì°¨ë¶„í•œ ì‹¤í–‰ê°€", note:"ê³„íšê³¼ ê¾¸ì¤€í•¨ì´ ê°•ì ì´ë©° ê°ì • ê¸°ë³µì´ ë¹„êµì  ì‘ìŠµë‹ˆë‹¤." };
    if (O>=70 && E>=70) return { title:"íƒìƒ‰í˜• ê°œì²™ì", note:"ìƒˆë¡œì›€ê³¼ ì‚¬ëŒì„ í†µí•´ ê¸°íšŒë¥¼ ë„“íˆëŠ” ê²½í–¥ì´ ê°•í•©ë‹ˆë‹¤." };
    if (A>=70 && N>=70) return { title:"ë¯¼ê°í•œ ê³µê°ê°€", note:"ê´€ê³„ì™€ ê°ì • ì‹ í˜¸ì— ë¯¼ê°í•˜ê³  ë°°ë ¤ê°€ ê¹Šì€ í¸ì…ë‹ˆë‹¤." };
    if (C>=70 && N>=70) return { title:"ì™„ë²½ì£¼ì˜ ì„±ì·¨ê°€", note:"ê¸°ì¤€ì´ ë†’ê³  ì„±ì‹¤í•˜ì§€ë§Œ ë¶€ë‹´ì´ ìŒ“ì´ë©´ ì†Œì§„ì— ì·¨ì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." };
    if (E<40 && O>=70) return { title:"ì¡°ìš©í•œ ì°½ì˜ê°€", note:"í˜¼ì ê¹Šê²Œ ëª°ì…í•˜ë©° ì•„ì´ë””ì–´ë¥¼ í™•ì¥í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤." };
    if (E>=70 && A>=70) return { title:"ê´€ê³„ ì£¼ë„í˜• í˜‘ì—…ê°€", note:"ì‚¬ëŒì„ ì—°ê²°í•˜ê³  íŒ€ ë¶„ìœ„ê¸°ë¥¼ ì‚´ë¦¬ëŠ” ê°•ì ì´ í½ë‹ˆë‹¤." };
    if (N>=70 && C<40) return { title:"ë¶ˆì•ˆ-ë¶„ì‚°í˜• íƒìƒ‰ê°€", note:"ê±±ì •ì´ ì‹¤í–‰ì„ í”ë“¤ ìˆ˜ ìˆì–´ êµ¬ì¡°í™”ê°€ ë„ì›€ì´ ë©ë‹ˆë‹¤." };
    if (A<40 && C>=70) return { title:"ì›ì¹™ ì¤‘ì‹¬ì˜ ì„±ê³¼ê°€", note:"ì„±ê³¼ ê¸°ì¤€ì´ ëšœë ·í•˜ê³  ì—„ê²©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." };
    if (O<40 && C>=70) return { title:"ì•ˆì • ì§€í–¥ ìš´ì˜ê°€", note:"ê²€ì¦ëœ ë°©ì‹ìœ¼ë¡œ ê¾¸ì¤€íˆ ì„±ê³¼ë¥¼ ìŒ“ëŠ” ê²½í–¥ì´ ê°•í•©ë‹ˆë‹¤." };
    return { title:"ê· í˜•í˜• ì ì‘ê°€", note:"ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ê°•ì ì„ ë°°ì¹˜í•˜ëŠ” í¸ì…ë‹ˆë‹¤." };
  }

  function buildKeywords(pct, style){
    const tags = [];
    const add = (s) => { if (!tags.includes(s) && tags.length<7) tags.push(s); };

    if (pct.O>=70) add("í˜¸ê¸°ì‹¬/í™•ì¥");
    else if (pct.O<40) add("ì•ˆì •/ê²€ì¦");
    else add("ì‹¤ìš©ì  ìœ ì—°");

    if (pct.C>=70) add("ê³„íš/ì™„ìˆ˜");
    else if (pct.C<40) add("ììœ /ì¦‰í¥");
    else add("ì ë‹¹í•œ êµ¬ì¡°");

    if (pct.E>=70) add("í‘œí˜„/ì£¼ë„");
    else if (pct.E<40) add("ê´€ì°°/ë‚´í–¥");
    else add("ìƒí™©ì  ì‚¬êµ");

    if (pct.A>=70) add("í˜‘ë ¥/ë°°ë ¤");
    else if (pct.A<40) add("ì§ì„¤/ê²½ìŸ");
    else add("í˜„ì‹¤ì  íƒ€í˜‘");

    if (pct.N>=70) add("ë¯¼ê°/ê²½ê³„");
    else if (pct.N<40) add("ì¹¨ì°©/íšŒë³µ");
    else add("ë³´í†µì˜ ê¸´ì¥");

    // ìŠ¤íƒ€ì¼ ì œëª©ì„ í‚¤ì›Œë“œë¡œ í•œ ë²ˆ ë” ë³´ê°•
    add(style.title);

    return tags;
  }

  function traitParagraph(traitKey, pct, level){
    const t = TRAITS[traitKey];
    const p = fmt1(pct);

    // ê³µí†µ ì„œë¬¸
    let out = `â€¢ ${t.name} (${p}ì , ${levelEmoji(level)} ${level})\n  ${t.desc}\n`;

    const high = (s) => out += "  " + s + "\n";
    const mid  = (s) => out += "  " + s + "\n";
    const low  = (s) => out += "  " + s + "\n";

    if (traitKey==="O"){
      if (level==="ë†’ìŒ"){
        high("ìƒˆë¡œìš´ ìê·¹ì„ í†µí•´ ë°°ì›€ê³¼ ë™ê¸°ë¶€ì—¬ê°€ ì˜ ìƒê¹ë‹ˆë‹¤. â€˜ì™œ?â€™ â€˜ë‹¤ë¥¸ ë°©ë²•ì€?â€™ ê°™ì€ ì§ˆë¬¸ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë– ì˜¤ë¥´ëŠ” í¸ì´ì—ìš”.");
        high("ê°•ì : í˜ì‹ , ì•„ì´ë””ì–´ ë°œì‚°, ê´€ì  ì „í™˜. í™˜ê²½ì´ ë‹¨ì¡°ë¡œìš¸ìˆ˜ë¡ ì°½ì˜ì  íƒˆì¶œêµ¬ë¥¼ ì°¾ìŠµë‹ˆë‹¤.");
        high("ì£¼ì˜: í˜„ì‹¤ ì œì•½(ì‹œê°„/ìì›)ì„ ê³¼ì†Œí‰ê°€í•˜ë©´ ì‹¤í–‰ì´ ëŠ˜ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. ì•„ì´ë””ì–´ë¥¼ â€˜ì‘ê²Œ ì‹¤í—˜â€™ìœ¼ë¡œ ìª¼ê°œë©´ í˜ì´ ë©ë‹ˆë‹¤.");
      } else if (level==="ë³´í†µ"){
        mid("ìƒˆë¡œì›€ê³¼ ìµìˆ™í•¨ ì‚¬ì´ì—ì„œ ê· í˜•ì„ ì¡ëŠ” í¸ì…ë‹ˆë‹¤. ì‹¤ìš©ì„±ì´ ë³´ì´ë©´ ìƒˆë¡œìš´ ë°©ì‹ë„ ë°›ì•„ë“¤ì´ê³ , ë¶ˆí™•ì‹¤í•˜ë©´ ê²€ì¦ì„ ì›í•©ë‹ˆë‹¤.");
        mid("ê°•ì : ìƒí™© íŒë‹¨, ë¬´ë¦¬í•˜ì§€ ì•ŠëŠ” ë³€í™”. íŒ€ì—ì„œëŠ” â€˜í˜„ì‹¤ì ì¸ ê°œì„ ì•ˆâ€™ì„ ë‚´ëŠ” ì—­í• ì´ ì˜ ë§ìŠµë‹ˆë‹¤.");
        mid("ì£¼ì˜: ë°”ì˜ê±°ë‚˜ í”¼ê³¤í•  ë•ŒëŠ” ìƒˆë¡œì›€ì„ íšŒí”¼í•´ ì„±ì¥ ê¸°íšŒê°€ ì¤„ ìˆ˜ ìˆìœ¼ë‹ˆ, ì‘ì€ í˜¸ê¸°ì‹¬ ë£¨í‹´(ì£¼ 1íšŒ íƒìƒ‰)ì„ ê¶Œí•©ë‹ˆë‹¤.");
      } else {
        low("ìµìˆ™í•˜ê³  ê²€ì¦ëœ ë°©ì‹ì—ì„œ ì•ˆì •ê°ì„ ëŠë¼ëŠ” ê²½í–¥ì´ í½ë‹ˆë‹¤. ë³€í™”ë¥¼ â€˜í•„ìš”í•  ë•Œë§Œâ€™ ì„ íƒí•˜ëŠ” í¸ì´ì—ìš”.");
        low("ê°•ì : í‘œì¤€í™”, ì•ˆì •ì  ìš´ì˜, ë¦¬ìŠ¤í¬ ê´€ë¦¬. ë°˜ë³µ ì—…ë¬´ë‚˜ í’ˆì§ˆ ìœ ì§€ì—ì„œ ì‹ ë¢°ë¥¼ ì–»ìŠµë‹ˆë‹¤.");
        low("ì£¼ì˜: í™˜ê²½ ë³€í™”ê°€ ë¹ ë¥¼ ë•ŒëŠ” ì ì‘ì´ ëŠ¦ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”. â€˜ë³€í™”ì˜ ìµœì†Œ ë‹¨ìœ„â€™ë¥¼ ì •í•´ ì¡°ê¸ˆì”© ì—…ë°ì´íŠ¸í•´ ë³´ì„¸ìš”.");
      }
    }

    if (traitKey==="C"){
      if (level==="ë†’ìŒ"){
        high("ê³„íšê³¼ ì±…ì„ê°ì´ ê°•í•´, ì£¼ë³€ì´ â€˜ë¯¿ê³  ë§¡ê¸¸ ìˆ˜ ìˆë‹¤â€™ê³  ëŠë¼ê¸° ì‰½ìŠµë‹ˆë‹¤. ëª©í‘œë¥¼ ìª¼ê°œ ì‹¤í–‰í•˜ëŠ” í˜ì´ ìˆì–´ìš”.");
        high("ê°•ì : ì§€ì†ë ¥, ìê¸°ê´€ë¦¬, í’ˆì§ˆ. ì¥ê¸° í”„ë¡œì íŠ¸ì—ì„œ ì„±ê³¼ê°€ ëˆ„ì ë©ë‹ˆë‹¤.");
        high("ì£¼ì˜: ê¸°ì¤€ì´ ë†’ì•„ì§€ë©´ ìŠ¤ìŠ¤ë¡œë¥¼ ëª°ì•„ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ì™„ë²½â€™ ëŒ€ì‹  â€˜ì™„ë£Œâ€™ë¥¼ ìš°ì„ í•˜ëŠ” ê·œì¹™ì„ í•œ ì¤„ë¡œ ì •í•´ë‘ë©´ ì†Œì§„ì„ ì¤„ì…ë‹ˆë‹¤.");
      } else if (level==="ë³´í†µ"){
        mid("í•„ìš”í•  ë•ŒëŠ” êµ¬ì¡°ë¥¼ ë§Œë“¤ê³ , ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ì¡°ì ˆí•˜ëŠ” í¸ì…ë‹ˆë‹¤. ê¸°ë³¸ì ì¸ ì±…ì„ê°ì€ ìˆì§€ë§Œ ê³¼ë„í•œ í†µì œëŠ” í”¼í•˜ë ¤ í•©ë‹ˆë‹¤.");
        mid("ê°•ì : ê· í˜•ê°, í˜„ì‹¤ì  ì‹¤í–‰. í˜‘ì—…ì—ì„œëŠ” ì¼ì •ê³¼ ê´€ê³„ë¥¼ í•¨ê»˜ ê³ ë ¤í•˜ëŠ” í¸ì…ë‹ˆë‹¤.");
        mid("ì£¼ì˜: ëª©í‘œê°€ ëª¨í˜¸í•˜ë©´ ë¯¸ë£¨ê¸°ê°€ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. ì‹œì‘ ì¥ë²½ì„ ë‚®ì¶”ëŠ” â€˜5ë¶„ ì°©ìˆ˜â€™ê°€ íš¨ê³¼ì ì…ë‹ˆë‹¤.");
      } else {
        low("ììœ ë„ì™€ ì¦‰í¥ì„±ì´ ë¹„êµì  í½ë‹ˆë‹¤. í¥ë¯¸ê°€ ìƒê¸°ë©´ ëª°ì…í•˜ì§€ë§Œ, ë°˜ë³µ/ì •ë¦¬/ë§ˆê° ê°™ì€ êµ¬ì¡°ê°€ ì•½ì ì´ ë  ìˆ˜ ìˆì–´ìš”.");
        low("ê°•ì : ìœ ì—°ì„±, ì¦‰ì‹œ ëŒ€ì‘, ìƒˆë¡œìš´ ì‹œë„. ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ìƒí™©ì—ì„œ ìˆœë°œë ¥ì´ ë‹ë³´ì…ë‹ˆë‹¤.");
        low("ì£¼ì˜: ì¤‘ìš”í•œ ì¼ì€ â€˜ê¸°ë¶„â€™ì— ë§¡ê¸°ë©´ ë¶ˆì•ˆì •í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ì£¼ ì‘ì€ ì²´í¬ë¦¬ìŠ¤íŠ¸(ì˜¤ëŠ˜ 3ê°œ)ë§Œìœ¼ë¡œë„ ì„±ì‹¤ì„±ì´ í¬ê²Œ ë³´ì™„ë©ë‹ˆë‹¤.");
      }
    }

    if (traitKey==="E"){
      if (level==="ë†’ìŒ"){
        high("ëŒ€ì¸ ìƒí˜¸ì‘ìš©ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ê³ , í‘œí˜„ê³¼ ì¶”ì§„ì´ ë¹ ë¥¸ í¸ì…ë‹ˆë‹¤. ë¶„ìœ„ê¸° ë©”ì´ì»¤/ì´‰ì§„ì ì—­í• ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë§¡ê¸°ë„ í•´ìš”.");
        high("ê°•ì : ë„¤íŠ¸ì›Œí‚¹, ì„¤ë“, ì‹¤í–‰ ì´‰ì§„. íŒ€ì—ì„œ ì†ë„ë¥¼ ì˜¬ë¦¬ëŠ” ë° ê¸°ì—¬í•©ë‹ˆë‹¤.");
        high("ì£¼ì˜: í˜¼ì ìƒê°í•  ì‹œê°„ì´ ë¶€ì¡±í•˜ë©´ íŒë‹¨ì´ ê¸‰í•´ì§ˆ ìˆ˜ ìˆì–´ìš”. ì¤‘ìš”í•œ ê²°ì •ì€ â€˜í•˜ë£¨ ìˆ™ì„±â€™ ê°™ì€ ì•ˆì „ì¥ì¹˜ë¥¼ ê¶Œí•©ë‹ˆë‹¤.");
      } else if (level==="ë³´í†µ"){
        mid("ì‚¬ëŒê³¼ í˜¼ì ì‹œê°„ ì‚¬ì´ì—ì„œ ê· í˜•ì„ ì¡ëŠ” í¸ì…ë‹ˆë‹¤. í•„ìš”í•  ë•ŒëŠ” ë‚˜ì„œì§€ë§Œ, ê³¼í•œ ì†ŒìŒì´ë‚˜ ê¸´ ëª¨ì„ì€ í”¼ë¡œí•  ìˆ˜ ìˆì–´ìš”.");
        mid("ê°•ì : ìƒí™©ì  ë¦¬ë”ì‹­, ì¡°ì ˆ ëŠ¥ë ¥. ëŒ€í™”ì—ì„œëŠ” ë“£ê¸°ì™€ ë§í•˜ê¸°ê°€ ë¹„êµì  ê· í˜•ì ì…ë‹ˆë‹¤.");
        mid("ì£¼ì˜: ë‚¯ì„  í™˜ê²½ì—ì„œëŠ” ëª¸ì´ ë¨¼ì € ê¸´ì¥í•  ìˆ˜ ìˆìœ¼ë‹ˆ, â€˜ì²« 5ë¶„ì€ ì§ˆë¬¸ 1ê°œâ€™ ê°™ì€ ì‘ì€ í–‰ë™ ê³„íšì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.");
      } else {
        low("í˜¼ì ìˆëŠ” ì‹œê°„ì—ì„œ ì—ë„ˆì§€ë¥¼ íšŒë³µí•˜ê³ , ê´€ì°°ì„ í†µí•´ ì •ë¦¬í•œ ë’¤ ë§í•˜ëŠ” í¸ì´ í¸ì•ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        low("ê°•ì : ê¹Šì´ ìˆëŠ” ì§‘ì¤‘, ì‹ ì¤‘í•œ ë°œì–¸, ë¶„ì„ì  ê´€ì°°. 1:1 ì†Œí†µì´ë‚˜ ê¸€ë¡œ ì •ë¦¬í•˜ëŠ” ë°©ì‹ì—ì„œ ê°•í•´ìš”.");
        low("ì£¼ì˜: ê¸°íšŒê°€ â€˜ì‚¬ëŒ ì‚¬ì´â€™ì—ì„œ ìƒê¸¸ ë•Œ ë†“ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶€ë‹´ì´ ì ì€ ë°©ì‹(ë©”ì‹ ì €/ì‚¬ì „ ì¤€ë¹„)ìœ¼ë¡œ ì—°ê²°ì„ ëŠ˜ë ¤ë³´ì„¸ìš”.");
      }
    }

    if (traitKey==="A"){
      if (level==="ë†’ìŒ"){
        high("ê´€ê³„ì˜ ì§ˆê³¼ ì •ì„œì  ì•ˆì „ì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” í¸ì…ë‹ˆë‹¤. ìƒëŒ€ì˜ ì…ì¥ì„ ê³ ë ¤í•˜ë©° ê°ˆë“±ì„ ì™„í™”ì‹œí‚¤ëŠ” í˜ì´ ìˆì–´ìš”.");
        high("ê°•ì : í˜‘ë ¥, ì‹ ë¢° í˜•ì„±, íŒ€ ì¼€ë¯¸. ì¡°ìœ¨ê³¼ ì§€ì›ì´ í•„ìš”í•œ ì—­í• ì— ì í•©í•©ë‹ˆë‹¤.");
        high("ì£¼ì˜: â€˜ê±°ì ˆâ€™ì´ ì–´ë ¤ì›Œ ê³¼ë¶€í•˜ê°€ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶€íƒì„ ë°›ìœ¼ë©´ ì¦‰ì‹œ ìˆ˜ë½ ëŒ€ì‹  â€˜í™•ì¸ í›„ ë‹µâ€™ ìŠµê´€ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.");
      } else if (level==="ë³´í†µ"){
        mid("ë°°ë ¤ì™€ í˜„ì‹¤ ê°ê° ì‚¬ì´ì—ì„œ ê· í˜•ì„ ì¡ìŠµë‹ˆë‹¤. ê´€ê³„ë¥¼ ì§€í‚¤ë˜, í•„ìš”í•˜ë©´ ì˜ê²¬ë„ ë¶„ëª…íˆ ë‚´ëŠ” í¸ì´ì—ìš”.");
        mid("ê°•ì : í•©ë¦¬ì  í˜‘ì—…, ê³µì •ì„±. ê°ˆë“± ìƒí™©ì—ì„œ â€˜ì¡°ê±´ì„ ì •ë¦¬í•´ í•©ì˜â€™í•˜ëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.");
        mid("ì£¼ì˜: í”¼ë¡œê°€ ìŒ“ì´ë©´ ëƒ‰ì†Œì  í‘œí˜„ì´ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ì •ì´ ì˜¬ë¼ì˜¬ ë•ŒëŠ” ì‚¬ì‹¤ê³¼ í•´ì„ì„ ë¶„ë¦¬í•˜ëŠ” ì—°ìŠµì´ ë„ì›€ ë©ë‹ˆë‹¤.");
      } else {
        low("ì§ì„¤ì ì´ê³  ê¸°ì¤€ ì¤‘ì‹¬ì˜ ì†Œí†µì„ ì„ í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íš¨ìœ¨ê³¼ ì›ì¹™ì„ ì•ì„¸ìš°ëŠ” ê²½í–¥ì´ ìˆì–´ìš”.");
        low("ê°•ì : ë¬¸ì œ ì§ì‹œ, í˜‘ìƒ, ëƒ‰ì •í•œ íŒë‹¨. ê²½ìŸì  í™˜ê²½ì´ë‚˜ í’ˆì§ˆ ê¸°ì¤€ì´ í•„ìš”í•œ ê³³ì—ì„œ ê°•í•©ë‹ˆë‹¤.");
        low("ì£¼ì˜: ê´€ê³„ ë¹„ìš©ì´ ëŠ˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°™ì€ ë‚´ìš©ë„ â€˜ì˜ë„+ìš”ì²­â€™ êµ¬ì¡°ë¡œ ë§í•˜ë©´ ë§ˆì°°ì„ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆì–´ìš”.");
      }
    }

    if (traitKey==="N"){
      if (level==="ë†’ìŒ"){
        high("ìœ„í—˜ ì‹ í˜¸ë¥¼ ë¹ ë¥´ê²Œ ê°ì§€í•˜ê³  ëŒ€ë¹„í•˜ë ¤ëŠ” ê²½í–¥ì´ í½ë‹ˆë‹¤. ì´ â€˜ë¯¼ê°í•¨â€™ì€ ìƒí™©ì„ ê¼¼ê¼¼íˆ ë³´ê²Œ í•˜ëŠ” ì¥ì ì´ê¸°ë„ í•´ìš”.");
        high("ê°•ì : ë¦¬ìŠ¤í¬ ê°ì§€, ì¤€ë¹„ì„±, íƒ€ì¸ì˜ ê°ì • ì½ê¸°. ìœ„ê¸° ìƒí™©ì—ì„œ ë¨¼ì € ê²½ê³„í•´ í° ì†ì‹¤ì„ ë§‰ê¸°ë„ í•©ë‹ˆë‹¤.");
        high("ì£¼ì˜: ê±±ì •ì´ ê¸¸ì–´ì§€ë©´ ì—ë„ˆì§€ê°€ ì†Œëª¨ë˜ê³  ì‹¤í–‰ì´ í”ë“¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ê±±ì • ì‹œê°„ 10ë¶„â€™ì²˜ëŸ¼ ê±±ì •ì„ ë‹´ì•„ë‘ëŠ” í‹€ì´ íš¨ê³¼ì ì…ë‹ˆë‹¤.");
      } else if (level==="ë³´í†µ"){
        mid("ìŠ¤íŠ¸ë ˆìŠ¤ì— ëŒ€í•œ ë°˜ì‘ì´ í‰ê·  ë²”ìœ„ì— ìˆìŠµë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ ê¸´ì¥í•˜ì§€ë§Œ, ì‹œê°„ì´ ì§€ë‚˜ë©´ íšŒë³µí•˜ëŠ” í¸ì…ë‹ˆë‹¤.");
        mid("ê°•ì : í˜„ì‹¤ì  ê²½ê³„ì‹¬ê³¼ ì ì‘ì˜ ê· í˜•. í•„ìš”í•  ë•ŒëŠ” ê¼¼ê¼¼í•˜ê³ , ì§€ë‚˜ì¹œ ë¶ˆì•ˆì— ë¨¸ë¬¼ì§€ ì•Šìœ¼ë ¤ í•©ë‹ˆë‹¤.");
        mid("ì£¼ì˜: ìˆ˜ë©´/ì‹ì‚¬/ìš´ë™ ê°™ì€ ê¸°ë³¸ ì»¨ë””ì…˜ì´ ë¬´ë„ˆì§€ë©´ ì ìˆ˜ê°€ ì‰½ê²Œ í”ë“¤ë¦´ ìˆ˜ ìˆì–´ìš”. ìƒí™œ ë¦¬ë“¬ì„ ìš°ì„ ìˆœìœ„ë¡œ ë‘ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.");
      } else {
        low("ì •ì„œê°€ ë¹„êµì  ì•ˆì •ì ì´ê³  íšŒë³µì´ ë¹ ë¥¸ í¸ì…ë‹ˆë‹¤. ì™¸ë¶€ ìê·¹ì— íœ˜ë‘˜ë¦¬ê¸°ë³´ë‹¤ â€˜ì¼ë‹¨ í•´ë³´ìâ€™ë¡œ ì›€ì§ì¼ ìˆ˜ ìˆì–´ìš”.");
        low("ê°•ì : ì¹¨ì°©í•¨, ìœ„ê¸° ëŒ€ì²˜, ê°ì • ì¡°ì ˆ. ì••ë°•ì´ í° ìƒí™©ì—ì„œë„ ì¤‘ì‹¬ì„ ì¡ëŠ” ë° ê°•í•©ë‹ˆë‹¤.");
        low("ì£¼ì˜: ìœ„í—˜ ì‹ í˜¸ë¥¼ ê³¼ì†Œí‰ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì€ â€˜ìµœì•…ì˜ ê²½ìš°â€™ë§Œ 3ë¶„ ìƒê°í•´ë„ ê· í˜•ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.");
      }
    }

    return out.trim();
  }

  function interactionParagraphs(pct, lv, idx){
    const O=pct.O, C=pct.C, E=pct.E, A=pct.A, N=pct.N;
    const lines = [];

    // 1) ì‹¤í–‰/ì •ì„œ ì¶•
    if (C>=70 && N>=70){
      lines.push("â€¢ ì„±ì‹¤ì„±(C)â†‘ + ì‹ ê²½ì„±(N)â†‘: â€˜ê¸°ì¤€ì´ ë†’ì€ë° ë¶ˆì•ˆë„ ë†’ì€â€™ ì¡°í•©ì´ë¼, ì„±ê³¼ëŠ” ì˜ ë‚´ì§€ë§Œ ë§ˆìŒì˜ í”¼ë¡œê°€ ëˆ„ì ë˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ì¤€ë¹„ë¥¼ ë” í•˜ë©´ì„œë„ â€œì•„ì§ ë¶€ì¡±í•´â€ë¼ê³  ëŠë¼ëŠ” íŒ¨í„´ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”. ì´ë•ŒëŠ” ê¸°ì¤€ì„ ë‚®ì¶”ê¸°ë³´ë‹¤, ê¸°ì¤€ì„ ì§€í‚¤ëŠ” â€˜ë²”ìœ„â€™ë¥¼ ì¤„ì´ëŠ” ì „ëµ(í•µì‹¬ 1~2ê°œë§Œ ì™„ë²½, ë‚˜ë¨¸ì§€ëŠ” ì¶©ë¶„íˆ)ìœ¼ë¡œ ê· í˜•ì„ ì¡ëŠ” ê²Œ íš¨ê³¼ì ì…ë‹ˆë‹¤.");
    } else if (C>=70 && N<40){
      lines.push("â€¢ ì„±ì‹¤ì„±(C)â†‘ + ì‹ ê²½ì„±(N)â†“: â€˜ì°¨ë¶„í•œ ì‹¤í–‰â€™ ì¡°í•©ì…ë‹ˆë‹¤. ê³„íšì„ ì„¸ìš°ê³  ê¾¸ì¤€íˆ ë°€ì–´ë¶™ì´ë˜ ê°ì • ì†Œëª¨ê°€ ìƒëŒ€ì ìœ¼ë¡œ ì ì–´, ì¥ê¸° í”„ë¡œì íŠ¸ì—ì„œ ê°•ì ì´ í¬ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ë‹¤ë§Œ ë„ˆë¬´ ì•ˆì •ì ìœ¼ë¡œ í˜ëŸ¬ê°€ë©´ ë„ì „ì´ ì¤„ ìˆ˜ ìˆìœ¼ë‹ˆ, ì‘ì€ í˜ì‹  ê³¼ì œ(ì›” 1íšŒ)ë¥¼ ì¼ë¶€ëŸ¬ ë„£ì–´ë³´ë©´ ì„±ì¥ í­ì´ ì»¤ì§‘ë‹ˆë‹¤.");
    } else if (C<40 && N>=70){
      lines.push("â€¢ ì„±ì‹¤ì„±(C)â†“ + ì‹ ê²½ì„±(N)â†‘: ê±±ì •ì€ ë§ì€ë° êµ¬ì¡°ê°€ ì•½í•´ â€˜ìƒê°ì´ ì‹¤í–‰ì„ ì´ê¸°ëŠ”â€™ ìƒí™©ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¡°í•©ì˜ í•µì‹¬ ì²˜ë°©ì€ ì˜ì§€ë³´ë‹¤ í™˜ê²½ì…ë‹ˆë‹¤. (1) ì‹œì‘ ì¥ë²½ì„ ë‚®ì¶”ê³ , (2) ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ìµœì†Œí™”í•˜ë©°, (3) ëˆ„êµ°ê°€ì—ê²Œ ì§„í–‰ì„ ê³µìœ í•˜ëŠ” â€˜ê°€ë²¼ìš´ ì•½ì†â€™ì„ ë§Œë“¤ë©´ í¬ê²Œ ì¢‹ì•„ì§‘ë‹ˆë‹¤.");
    } else {
      lines.push("â€¢ ì‹¤í–‰(C)ê³¼ ì •ì„œ(N)ì˜ ê· í˜•: í˜„ì¬ëŠ” ì‹¤í–‰ë ¥ê³¼ ê¸´ì¥ê° ì‚¬ì´ì—ì„œ ì–´ëŠ ì •ë„ ê· í˜•ì„ ì¡ê³  ìˆìŠµë‹ˆë‹¤. ì»¨ë””ì…˜ì´ ì¢‹ì„ ë•ŒëŠ” ì¶”ì§„ì´ ì˜ ë˜ê³ , í”¼ê³¤í•  ë•ŒëŠ” ë¯¸ë£¨ê¸°ë‚˜ ê±±ì •ì´ ëŠ˜ ìˆ˜ ìˆì–´ìš”. ë”°ë¼ì„œ ì„±ê³¼ë¥¼ ì•ˆì •í™”í•˜ë ¤ë©´ â€˜ì»¨ë””ì…˜ ê´€ë¦¬ ë£¨í‹´â€™ì„ ì ìˆ˜ë§Œí¼ ì¤‘ìš”í•˜ê²Œ ë‹¤ë£¨ëŠ” ê²Œ ìœ ë¦¬í•©ë‹ˆë‹¤.");
    }

    // 2) ê´€ê³„/í‘œí˜„ ì¶•
    if (E>=70 && A>=70){
      lines.push("â€¢ ì™¸í–¥ì„±(E)â†‘ + ì¹œí™”ì„±(A)â†‘: ê´€ê³„ë¥¼ ë„“íˆê³  ìœ ì§€í•˜ëŠ” ë° ê°•í•©ë‹ˆë‹¤. ì‚¬ëŒì„ ì—°ê²°í•´ íŒ€ì˜ ì†ë„ë¥¼ ì˜¬ë¦¬ê³ , ë¶„ìœ„ê¸°ë¥¼ í¸í•˜ê²Œ ë§Œë“œëŠ” ì—­í• ì´ ìì—°ìŠ¤ëŸ½ìŠµë‹ˆë‹¤. ë‹¨, ë¶€íƒì´ ëª°ë¦´ ìˆ˜ ìˆìœ¼ë‹ˆ â€˜ë‚´ ì—…ë¬´ ì‹œê°„ ë¸”ë¡â€™ì„ ë¯¸ë¦¬ í™•ë³´í•´ ë‘ë©´ ê³¼ë¶€í•˜ë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì–´ìš”.");
    } else if (E>=70 && A<40){
      lines.push("â€¢ ì™¸í–¥ì„±(E)â†‘ + ì¹œí™”ì„±(A)â†“: í‘œí˜„ì€ ê°•í•œë° ì§ì„¤ì´ ì„ì¼ ìˆ˜ ìˆì–´ ì˜í–¥ë ¥ì´ ì»¤ì§‘ë‹ˆë‹¤. ì„¤ë“Â·ë¦¬ë”ì‹­ì— ê°•ì ì´ ìˆì§€ë§Œ, ìƒëŒ€ê°€ â€˜ì••ë°•â€™ìœ¼ë¡œ ëŠë¼ë©´ ì €í•­ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°™ì€ ë©”ì‹œì§€ë¥¼ â€˜ëª©í‘œ(ì™œ)â†’ê·¼ê±°â†’ì„ íƒì§€â€™ ìˆœì„œë¡œ ì œì‹œí•˜ë©´ í˜‘ì¡°ê°€ í¬ê²Œ ì˜¬ë¼ê°‘ë‹ˆë‹¤.");
    } else if (E<40 && A>=70){
      lines.push("â€¢ ì™¸í–¥ì„±(E)â†“ + ì¹œí™”ì„±(A)â†‘: ì¡°ìš©í•˜ì§€ë§Œ ë”°ëœ»í•œ í˜‘ì—…í˜•ì…ë‹ˆë‹¤. ì†Œìˆ˜ ê´€ê³„ì—ì„œ ê¹Šê²Œ ì‹ ë¢°ë¥¼ ìŒ“ê³ , ìƒëŒ€ë¥¼ ì‚´í”¼ëŠ” ëŠ¥ë ¥ì´ í½ë‹ˆë‹¤. ë‹¤ë§Œ ì˜ê²¬ì´ ëŠ¦ê²Œ ë‚˜ì˜¤ë©´ â€˜ìˆ˜ë™ì â€™ìœ¼ë¡œ ì˜¤í•´ë  ìˆ˜ ìˆì–´, íšŒì˜ ì „ 1ì¤„ ë©”ëª¨(í•µì‹¬ 2ê°œ)ë¥¼ ì¤€ë¹„í•´ë‘ë©´ ì¡´ì¬ê°ì´ ì•ˆì •ì ìœ¼ë¡œ ì˜¬ë¼ê°‘ë‹ˆë‹¤.");
    } else {
      lines.push("â€¢ ê´€ê³„/í‘œí˜„ ìŠ¤íƒ€ì¼: ëŒ€ì²´ë¡œ ìƒí™©ì— ë§ì¶° ì¡°ì ˆí•˜ëŠ” í¸ì…ë‹ˆë‹¤. ë” í¸í•œ ë°©ì‹(ëŒ€ë©´/ë¬¸ì„œ/ë©”ì‹ ì €)ì„ ì•Œê³  ê·¸ ì±„ë„ë¡œ ì†Œí†µì„ ì„¤ê³„í•˜ë©´, ë¶ˆí•„ìš”í•œ ì†Œëª¨ ì—†ì´ ê´€ê³„ í’ˆì§ˆì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    }

    // 3) ì°½ì˜/íƒìƒ‰ ì¶•
    if (O>=70 && C>=70){
      lines.push("â€¢ ê°œë°©ì„±(O)â†‘ + ì„±ì‹¤ì„±(C)â†‘: â€˜ì•„ì´ë””ì–´ë¥¼ ì‹¤ì œ ì„±ê³¼ë¡œ ë°”ê¾¸ëŠ”â€™ ë§¤ìš° ì¢‹ì€ ì¡°í•©ì…ë‹ˆë‹¤. íƒìƒ‰(ì•„ì´ë””ì–´)ê³¼ ìˆ˜ë ´(ì‹¤í–‰)ì´ í•¨ê»˜ ì›€ì§ì—¬ í”„ë¡œì íŠ¸ ì¶”ì§„ë ¥ì´ í½ë‹ˆë‹¤. ë‹¨, í•  ìˆ˜ ìˆëŠ” ê²Œ ë§ì•„ ì„ íƒì´ ëŠ˜ì–´ë‚˜ë©´ ì˜¤íˆë ¤ ì§€ì¹  ìˆ˜ ìˆìœ¼ë‹ˆ, ë¶„ê¸°ë§ˆë‹¤ â€˜í•˜ì§€ ì•Šì„ ê²ƒâ€™ ëª©ë¡ì„ ë§Œë“œëŠ” ê²Œ í° ë„ì›€ì´ ë©ë‹ˆë‹¤.");
    } else if (O>=70 && C<40){
      lines.push("â€¢ ê°œë°©ì„±(O)â†‘ + ì„±ì‹¤ì„±(C)â†“: ë°œìƒì´ í’ë¶€í•˜ì§€ë§Œ ì§€ì† ì‹¤í–‰ì´ í”ë“¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•ŒëŠ” í° ê³„íšë³´ë‹¤ â€œì§§ì€ ì‹¤í—˜â†’ì¦‰ì‹œ í”¼ë“œë°±â€ êµ¬ì¡°ê°€ ë§ìŠµë‹ˆë‹¤. ì˜ˆ: 30ë¶„ ì‹¤í—˜, ê²°ê³¼ 3ì¤„ ê¸°ë¡, ë‹¤ìŒ í–‰ë™ 1ê°œë§Œ ì •í•˜ê¸°. ì´ë ‡ê²Œ í•˜ë©´ ì°½ì˜ì„±ì´ â€˜ì™„ì„±â€™ìœ¼ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.");
    } else if (O<40 && C>=70){
      lines.push("â€¢ ê°œë°©ì„±(O)â†“ + ì„±ì‹¤ì„±(C)â†‘: ê²€ì¦ëœ ë°©ì‹ìœ¼ë¡œ ì•ˆì •ì  í’ˆì§ˆì„ ë‚´ëŠ” ì¡°í•©ì…ë‹ˆë‹¤. ìš´ì˜Â·ê´€ë¦¬Â·í’ˆì§ˆ ë³´ì¦ì—ì„œ ì‹ ë¢°ê°€ ë†’ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë³€í™”ê°€ í•„ìš”í•œ êµ­ë©´ì—ì„œ â€˜ìƒˆë¡œìš´ ë°©ì‹ì˜ ì‘ì€ íŒŒì¼ëŸ¿â€™ì„ 1ê°œë§Œ ì—´ì–´ë‘ë©´, ì•ˆì •ì„±ê³¼ í˜ì‹ ì„ ë™ì‹œì— ì¡ì„ ìˆ˜ ìˆì–´ìš”.");
    } else {
      lines.push("â€¢ íƒìƒ‰(O)ê³¼ êµ¬ì¡°(C): í˜„ì¬ëŠ” ìƒˆë¡œìš´ ì‹œë„ì™€ ì•ˆì • ìš´ì˜ ì‚¬ì´ì—ì„œ ë¬´ë¦¬í•˜ì§€ ì•ŠëŠ” í¸ì…ë‹ˆë‹¤. ì„±ì¥ ëª©í‘œê°€ ìˆë‹¤ë©´, â€˜ìƒˆë¡œì›€â€™ ë˜ëŠ” â€˜ë£¨í‹´â€™ ì¤‘ í•œ ì¶•ë§Œ ê°•í™”í•´ë„ ì „ì²´ ì²´ê° ì„±ê³¼ê°€ í¬ê²Œ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    }

    // ì§€í‘œ ì½”ë©˜íŠ¸(ê°„ì´ ìˆ˜ì¹˜ í•´ì„)
    lines.push(`â€¢ ê°„ì´ ì§€í‘œ í•´ì„: ì‚¬íšŒì  ì¶”ì§„ë ¥(${fmt1(idx.socialDrive)})ì€ ê´€ê³„Â·í‘œí˜„ì„ í†µí•œ ì˜í–¥ë ¥, ì‹¤í–‰/íšŒë³µ(${fmt1(idx.execution)})ì€ ê¾¸ì¤€í•¨ê³¼ ì •ì„œ íšŒë³µì˜ ì¡°í•©, ê³¼ë¶€í•˜ ìœ„í—˜(${fmt1(idx.riskOfBurnout)})ì€ â€œê¸°ì¤€+ê¸´ì¥â€ì˜ ëˆ„ì  ê°€ëŠ¥ì„±ì„ ëœ»í•©ë‹ˆë‹¤. ìˆ˜ì¹˜ê°€ ë†’ë‹¤ê³  ë¬´ì¡°ê±´ ì¢‹ê±°ë‚˜ ë‚˜ìœ ê²Œ ì•„ë‹ˆë¼, â€˜ê´€ë¦¬ í¬ì¸íŠ¸ê°€ ì–´ë””ëƒâ€™ë¥¼ ì•Œë ¤ì£¼ëŠ” ì‹ í˜¸ë¡œ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.`);

    return lines.join("\n\n");
  }

  function socialAttitudeParagraph(pct, lv, style){
    const E=pct.E, A=pct.A, N=pct.N;
    const lines = [];
    lines.push(`ë‹¹ì‹ ì€ ê´€ê³„ì—ì„œ â€œ${(A>=70)?"ë°°ë ¤ì™€ ì¡°ìœ¨":(A<40)?"ì›ì¹™ê³¼ ì§ì„¤":"ê· í˜•ê³¼ í˜„ì‹¤ê°"}â€ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì›€ì§ì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.`);
    lines.push((E>=70)
      ? "ì‚¬ëŒì´ ìˆëŠ” í™˜ê²½ì—ì„œ ì†ë„ê°€ ë¶™ê¸° ì‰½ê³ , ëŒ€í™”ë¡œ ì—ë„ˆì§€ë¥¼ ì–»ëŠ” í¸ì…ë‹ˆë‹¤. ì¹œë°€ê°ì´ ìƒê¸°ë©´ ë¹ ë¥´ê²Œ ì—°ê²°ë  ìˆ˜ ìˆì–´ìš”."
      : (E<40)
        ? "ê´€ê³„ëŠ” â€˜í­â€™ë³´ë‹¤ â€˜ê¹Šì´â€™ì— ê°•ì ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ì€ ì¸ì›ê³¼ ì•ˆì •ì ì¸ ë£¨í‹´ì´ í¸í•˜ê²Œ ëŠê»´ì§ˆ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤."
        : "ìƒí™©ì— ë”°ë¼ ì‚¬êµì„±ê³¼ í˜¼ì ì‹œê°„ì„ ì ì ˆíˆ ì¡°ì ˆí•˜ëŠ” í¸ì…ë‹ˆë‹¤. ì¤‘ìš”í•œ ê´€ê³„ì— ì§‘ì¤‘í•˜ë©´ ë§Œì¡±ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤."
    );
    lines.push((N>=70)
      ? "ì •ì„œ ì‹ í˜¸ì— ë¯¼ê°í•´ ìƒëŒ€ì˜ ê¸°ë¶„ ë³€í™”ë¥¼ ë¹ ë¥´ê²Œ ì½ì„ ìˆ˜ ìˆì§€ë§Œ, ë™ì‹œì— ì˜¤í•´/ê±±ì •ì´ ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”. ë¶ˆí™•ì‹¤í•œ ìƒí™©ì—ì„œëŠ” â€˜í™•ì¸ ì§ˆë¬¸â€™ì„ í•œ ë²ˆ ë” í•˜ëŠ” ê²ƒì´ ê´€ê³„ ì•ˆì •ì— ìœ ë¦¬í•©ë‹ˆë‹¤."
      : (N<40)
        ? "ê°ì •ì ìœ¼ë¡œ ë¹„êµì  ì•ˆì •ì ì´ë¼ ê°ˆë“± ìƒí™©ì—ì„œë„ ì¤‘ì‹¬ì„ ì¡ê¸° ì‰½ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ìƒëŒ€ê°€ ë¯¼ê°í•  ë•ŒëŠ” â€˜ê³µê° í•œ ë¬¸ì¥â€™ì„ ë¨¼ì € ë„£ì–´ì£¼ë©´ ì‹ ë¢°ê°€ ë” ë¹ ë¥´ê²Œ ìŒ“ì…ë‹ˆë‹¤."
        : "ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì•ˆì •ì ì´ì§€ë§Œ, ì»¨ë””ì…˜ì´ ë‚˜ì˜ë©´ ì˜ˆë¯¼í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ëŒ€í™”ëŠ” í”¼ê³¤í•  ë•Œë³´ë‹¤ ì—¬ìœ  ìˆì„ ë•Œ ì¡ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤."
    );
    lines.push(`í˜„ì¬ í”„ë¡œí•„(â€œ${style.title}â€) ê´€ì ì—ì„œ ë³´ë©´, ê´€ê³„ì˜ í•µì‹¬ ê³¼ì œëŠ” â€˜ë‚´ ì—ë„ˆì§€ë¥¼ ì§€í‚¤ë©´ì„œë„ í•„ìš”í•œ ì—°ê²°ì€ ìœ ì§€í•˜ëŠ” ê²ƒâ€™ì…ë‹ˆë‹¤. ì¦‰, ê´€ê³„ë¥¼ ëŠ˜ë¦¬ê¸°ë³´ë‹¤, ê´€ê³„ ë°©ì‹(ì±„ë„/ë¹ˆë„/ê²½ê³„ì„ )ì„ ì„¤ê³„í•˜ëŠ” ìª½ì´ ë” íš¨ê³¼ì ì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤.`);
    return lines.join("\n\n");
  }

  function workLearningParagraph(pct, lv, style){
    const O=pct.O, C=pct.C, E=pct.E, N=pct.N;
    const lines = [];
    lines.push(`ì¼/í•™ìŠµì—ì„œëŠ” â€œ${(C>=70)?"êµ¬ì¡°í™”ëœ ê³„íš":(C<40)?"í¥ë¯¸ ê¸°ë°˜ ëª°ì…":"í•„ìš”í•  ë•Œ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ë°©ì‹"}â€ì´ ì„±ê³¼ì— í° ì˜í–¥ì„ ì¤ë‹ˆë‹¤.`);
    lines.push((O>=70)
      ? "ìƒˆë¡œìš´ ê°œë…ì„ ë¹¨ë¦¬ í¡ìˆ˜í•˜ê³ , â€˜ì™œ ì´ë ‡ê²Œ ë˜ì§€?â€™ë¥¼ íŒŒê³ ë“¤ì–´ ì´í•´ë¥¼ ë„“íˆëŠ” íƒ€ì…ì¼ ìˆ˜ ìˆì–´ìš”. íƒìƒ‰ì„ â€˜ì§§ì€ ì‹¤í—˜â€™ìœ¼ë¡œ ë§Œë“¤ë©´ ì†ë„ê°€ ë” ë¶™ìŠµë‹ˆë‹¤."
      : (O<40)
        ? "ê²€ì¦ëœ ìë£Œ/ë°©ë²•ì„ ì„ í˜¸í•  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤. íŠœí† ë¦¬ì–¼, ì˜ˆì œ, í‘œì¤€ í”„ë¡œì„¸ìŠ¤ì²˜ëŸ¼ â€˜ì •ë‹µì´ ìˆëŠ” ìë£Œâ€™ê°€ ì˜ ë§ì„ ìˆ˜ ìˆì–´ìš”."
        : "ì‹¤ìš©ì„±ê³¼ í˜¸ê¸°ì‹¬ì„ í•¨ê»˜ ë³´ëŠ” í¸ì…ë‹ˆë‹¤. ëª©í‘œê°€ ëª…í™•í•˜ë©´ ìƒˆ ë°©ë²•ë„ ë°›ì•„ë“¤ì´ê³ , ë¶ˆí•„ìš”í•˜ë©´ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜í•˜ë ¤ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤."
    );
    lines.push((N>=70)
      ? "ê¸´ì¥ì´ ë†’ì„ ë•ŒëŠ” ì‘ì—… ì „ â€˜ì •ë¦¬ ì‹œê°„ì´ ê¸¸ì–´ì§€ê³  ì‹œì‘ì´ ëŠ¦ì–´ì§€ëŠ”â€™ íŒ¨í„´ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹œì‘ì„ ì‰½ê²Œ ë§Œë“œëŠ” 2ë‹¨ê³„(1ë‹¨ê³„=1ë¶„ ì •ë¦¬, 2ë‹¨ê³„=5ë¶„ ì°©ìˆ˜)ê°€ íš¨ê³¼ì ì…ë‹ˆë‹¤."
      : (N<40)
        ? "ì••ë°• ì†ì—ì„œë„ ì¶”ì§„ì´ ë¹„êµì  ì•ˆì •ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë¦¬ìŠ¤í¬ ì ê²€ì´ ë¶€ì¡±í•´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ, í° ì¼ì€ â€˜ì²´í¬í¬ì¸íŠ¸ 2ê°œâ€™ë§Œ ê°•ì œí•´ë„ ì•ˆì •ì„±ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤."
        : "í‰ê·  ë²”ìœ„ì˜ ê¸´ì¥ê°ìœ¼ë¡œ ì„±ê³¼ë¥¼ ë‚´ëŠ” í¸ì…ë‹ˆë‹¤. ì¼ì •ì´ ë¹¡ë¹¡í•´ì§ˆìˆ˜ë¡ ìˆ˜ë©´/ì‹ì‚¬ ê°™ì€ ê¸°ë³¸ ê´€ë¦¬ê°€ ì„±ê³¼ë¥¼ ì¢Œìš°í•©ë‹ˆë‹¤."
    );
    lines.push((E>=70)
      ? "í† ë¡ Â·í”¼ë“œë°±Â·í˜‘ì—… í™˜ê²½ì—ì„œ ë™ê¸°ë¶€ì—¬ê°€ ì˜ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µê°œ ì•½ì†(ì£¼ê°„ ê³µìœ ) ê°™ì€ ì¥ì¹˜ë¥¼ ì“°ë©´ ì‹¤í–‰ë ¥ì´ ë” ì•ˆì •í™”ë©ë‹ˆë‹¤."
      : (E<40)
        ? "í˜¼ì ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì—ì„œ íš¨ìœ¨ì´ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¹Šì€ ì¼(Deep Work) ì‹œê°„ì„ í™•ë³´í•˜ê³ , ì†Œí†µì€ â€˜ì •ë¦¬ëœ ë¬¸ì„œ/ë©”ì‹œì§€â€™ë¡œ í•˜ëŠ” ë°©ì‹ì´ ì˜ ë§ìŠµë‹ˆë‹¤."
        : "í˜¼ì ì¼ê³¼ í˜‘ì—…ì„ ì ì ˆíˆ ì„ëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤. ì¼ì •ì˜ ì•ë¶€ë¶„ì€ í˜¼ì ì •ë¦¬, ë’·ë¶€ë¶„ì€ í”¼ë“œë°± ë°›ëŠ” ì‹ìœ¼ë¡œ ë¦¬ë“¬ì„ ì„¤ê³„í•´ ë³´ì„¸ìš”."
    );
    return lines.join("\n\n");
  }

  function potentialParagraph(pct, lv, style){
    const O=pct.O, C=pct.C, E=pct.E, A=pct.A;
    const lines = [];
    lines.push("ì ì¬ ì—­ëŸ‰ì€ â€˜ê°•ì ì´ í•„ìš”í•œ ë¬´ëŒ€â€™ë¥¼ ì°¾ì„ ë•Œ í¬ê²Œ ì‚´ì•„ë‚©ë‹ˆë‹¤. ì•„ë˜ëŠ” ë‹¹ì‹  ì ìˆ˜ ì¡°í•©ì—ì„œ íŠ¹íˆ ì„±ì¥ ê°€ëŠ¥ì„±ì´ í° ì˜ì—­ì…ë‹ˆë‹¤.");
    if (O>=70 && C>=70) lines.push("1) ê¸°íš/ì „ëµ/ì œí’ˆ/ì—°êµ¬ì²˜ëŸ¼ â€˜ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì‹¤í–‰ìœ¼ë¡œ ì˜®ê¸°ëŠ”â€™ ë¶„ì•¼ì—ì„œ ê°•ì ì´ í¬ê²Œ ë°œíœ˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ì´ë””ì–´-ì‹¤í–‰ ì‚¬ì´ì˜ ì—°ê²°ì„ ë‹´ë‹¹í•˜ë©´ ì„±ê³¼ê°€ ëˆˆì— ë„ê²Œ ëˆ„ì ë©ë‹ˆë‹¤.");
    else if (O>=70) lines.push("1) íƒìƒ‰/ì½˜í…ì¸ /ê¸°íš/ì°½ì˜ ë¬¸ì œ í•´ê²°ì—ì„œ ë‘ê°ì´ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ì–‘í•œ ì…ë ¥(ì±…/ê°•ì˜/ì‚¬ëŒ)ì„ ì—°ê²°í•´ ë…íŠ¹í•œ ê´€ì ì„ ë§Œë“œëŠ” ëŠ¥ë ¥ì´ ê°•ì ì´ ë©ë‹ˆë‹¤.");
    else if (C>=70) lines.push("1) ìš´ì˜/í”„ë¡œì íŠ¸ ê´€ë¦¬/í’ˆì§ˆ/ë°ì´í„° ì •ë¦¬ ê°™ì€ â€˜ì•ˆì •ì  ì„±ê³¼ ëˆ„ì â€™ ì˜ì—­ì—ì„œ ì‹ ë¢°ë¥¼ ì–»ê¸° ì‰½ìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ ë°˜ë³µ ì„±ê³¼ë¥¼ ë‚´ëŠ” ë° ê°•ì ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”.");
    else lines.push("1) ë³€í™”ì— ë”°ë¼ ì—­í• ì„ ë°”ê¾¸ë©° ì ì‘í•˜ëŠ” í™˜ê²½(ìŠ¤íƒ€íŠ¸ì—…/í”„ë¡œì íŠ¸í˜• ì—…ë¬´)ì—ì„œ ê°•ì ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì„±ê³¼ë¥¼ ë‚¨ê¸°ë ¤ë©´ â€˜ê¸°ë¡â€™ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.");

    if (E>=70 && A>=70) lines.push("2) ì‚¬ëŒì„ ì—°ê²°í•˜ê³  í˜‘ì—…ì„ ì´‰ì§„í•˜ëŠ” ì—­ëŸ‰(ì»¤ë®¤ë‹ˆì¼€ì´ì…˜/ë¦¬ë”ì‹­/ì»¤ë®¤ë‹ˆí‹° ìš´ì˜)ì´ í¬ê²Œ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê´€ê³„ë§ì´ ê³§ ìì‚°ì´ ë˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.");
    else if (E>=70) lines.push("2) ë°œí‘œ/ì„¤ë“/ì˜ì—…/í˜‘ìƒì²˜ëŸ¼ â€˜ì—ë„ˆì§€ë¡œ ë¶„ìœ„ê¸°ë¥¼ ì›€ì§ì´ëŠ”â€™ ì—­í• ì—ì„œ ê°•ì ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë””í…Œì¼ ê²€ì¦ì„ ë³´ì™„í•˜ë©´ ì˜í–¥ë ¥ì´ ë” ê±´ê°•í•´ì§‘ë‹ˆë‹¤.");
    else if (A>=70) lines.push("2) ì½”ì¹­/ì§€ì›/ì¡°ìœ¨/êµìœ¡ì²˜ëŸ¼ â€˜ì‚¬ëŒì˜ ìƒíƒœë¥¼ ì½ê³  ë•ëŠ”â€™ ì˜ì—­ì—ì„œ ì„±ì¥ ì ì¬ë ¥ì´ í½ë‹ˆë‹¤. ì‹ ë¢°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„±ê³¼ë¥¼ ë§Œë“œëŠ” ë°©ì‹ì´ ë§ìŠµë‹ˆë‹¤.");
    else lines.push("2) ê¸°ì¤€ì„ ì„¸ìš°ê³  ë¬¸ì œë¥¼ ì§ë©´í•˜ëŠ” ì—­í• (í‰ê°€/ë¦¬ìŠ¤í¬ ê´€ë¦¬/í’ˆì§ˆ ê¸°ì¤€ ìˆ˜ë¦½)ì—ì„œ ê°•ì ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨, ê´€ê³„ ë¹„ìš©ì„ ì¤„ì´ëŠ” ì†Œí†µ ê¸°ìˆ ì´ í•¨ê»˜ ê°€ë©´ ë” ê°•í•´ì§‘ë‹ˆë‹¤.");

    lines.push(`3) í”„ë¡œí•„(â€œ${style.title}â€) ê´€ì ì—ì„œ, ë‹¹ì‹ ì—ê²Œ ìœ ë¦¬í•œ ì„±ì¥ ì „ëµì€ â€˜ê°•ì ì„ ê³¼í•˜ê²Œ í‚¤ìš°ê¸°â€™ë³´ë‹¤ â€˜ì•½ì ì˜ ìµœì†Œ ë³´ì™„â€™ì„ í†µí•´ ê°•ì ì´ ë” ì˜ ë°œíœ˜ë˜ê²Œ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ì˜ˆ: ì„±ì‹¤ì„±ì´ ë‚®ë‹¤ë©´ ê±°ëŒ€í•œ ê³„íš ëŒ€ì‹  3ê°œ ì²´í¬ë¦¬ìŠ¤íŠ¸, ì‹ ê²½ì„±ì´ ë†’ë‹¤ë©´ ê±±ì •ì„ ë‹´ëŠ” í‹€, ì™¸í–¥ì„±ì´ ë‚®ë‹¤ë©´ ê¸€ë¡œ ì†Œí†µ ì±„ë„ í™•ë³´ ê°™ì€ ë°©ì‹ì…ë‹ˆë‹¤.`);
    return lines.join("\n\n");
  }

  function cautionParagraph(pct, lv, style){
    const C=pct.C, N=pct.N, A=pct.A, E=pct.E;
    const lines = [];
    // ê¸°ë³¸
    lines.push("ìŠ¤íŠ¸ë ˆìŠ¤ëŠ” ì„±ê²© â€˜ë‚˜ì¨â€™ì´ ì•„ë‹ˆë¼, ì—ë„ˆì§€ê°€ ìƒˆëŠ” ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” ì‹ í˜¸ì…ë‹ˆë‹¤. ì•„ë˜ í•­ëª© ì¤‘ 2ê°œ ì´ìƒì´ ìì£¼ ë³´ì´ë©´ ë£¨í‹´ì„ ì¡°ì •í•  ì‹œì ì¼ ìˆ˜ ìˆì–´ìš”.");

    // ì¡°ê±´ë³„ ê²½ê³ 
    if (C>=70 && N>=70){
      lines.push("â€¢ ì™„ë²½ì£¼ì˜ ì†Œì§„ ìœ„í—˜: ê¸°ì¤€ì´ ë†’ê³  ê±±ì •ì´ í•¨ê»˜ ì˜¬ë¼ê°€ë©´, â€˜ì‰¬ëŠ” ì¤‘ì—ë„ ë¨¸ë¦¬ê°€ ì‰¬ì§€ ì•ŠëŠ”â€™ ìƒíƒœê°€ ë˜ê¸° ì‰½ìŠµë‹ˆë‹¤. íœ´ì‹ë„ â€˜ê³„íšëœ íœ´ì‹(ì‹œê°„/ì¢…ë£Œ ì¡°ê±´)â€™ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ê²Œ ë„ì›€ì´ ë©ë‹ˆë‹¤.");
    } else if (N>=70){
      lines.push("â€¢ ë°˜ì¶”/ê±±ì • ë£¨í”„: ë¨¸ë¦¿ì† ì‹œë®¬ë ˆì´ì…˜ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒê°ì˜ ë¬´ê²Œë¥¼ ì¤„ì´ë ¤ë©´, ê±±ì •ì„ â€˜ë¬¸ì¥ìœ¼ë¡œ ì ì–´ ë°”ê¹¥ì— ë‘ëŠ”â€™ ê²ƒë§Œìœ¼ë¡œë„ íš¨ê³¼ê°€ í½ë‹ˆë‹¤.");
    } else if (C>=70){
      lines.push("â€¢ ê³¼ì—… ê³¼ë¶€í•˜: ì±…ì„ê°ì´ ê°•í•˜ë©´ ë¶€íƒì„ ë– ì•ˆê¸° ì‰½ìŠµë‹ˆë‹¤. ì—…ë¬´ëŸ‰ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ â€˜ê±°ì ˆ/ìœ„ì„â€™ ìŠ¤í‚¬ì´ ê±´ê°•ì„ ì§€í‚µë‹ˆë‹¤.");
    } else {
      lines.push("â€¢ ì—ë„ˆì§€ ë¶„ì‚°: ëª©í‘œê°€ ë§ì•„ì§€ë©´ ì§‘ì¤‘ì´ ê¹¨ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•ŒëŠ” â€˜ì´ë²ˆ ì£¼ 1ê°œë§Œ í™•ì‹¤íˆâ€™ ì „ëµì´ íš¨ê³¼ì ì…ë‹ˆë‹¤.");
    }

    if (A>=70){
      lines.push("â€¢ ê²½ê³„ì„  ì•½í™”: ë°°ë ¤ê°€ ê¹Šì„ìˆ˜ë¡ ìê¸° ì‹œê°„ì„ ë’¤ë¡œ ë¯¸ë£¨ê¸° ì‰½ìŠµë‹ˆë‹¤. ë¶€íƒì„ ë°›ì•˜ì„ ë•ŒëŠ” â€˜ê°€ëŠ¥ ì‹œê°„/ì¡°ê±´â€™ì„ ë¨¼ì € ë§í•˜ë©´ ê´€ê³„ë¥¼ ì§€í‚¤ë©´ì„œë„ ê³¼ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆì–´ìš”.");
    } else if (A<40){
      lines.push("â€¢ ê´€ê³„ ë§ˆì°°: íš¨ìœ¨ì„ ìš°ì„ í•˜ë©´ ìƒëŒ€ê°€ ê±°ì¹ ê²Œ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”êµ¬ì‚¬í•­ì„ ë§í•˜ê¸° ì „ì— â€˜ìƒëŒ€ì˜ ë…¸ë ¥ ì¸ì • 1ë¬¸ì¥â€™ì„ ë„£ìœ¼ë©´ ë¶ˆí•„ìš”í•œ ê°ˆë“±ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.");
    }

    if (E<40){
      lines.push("â€¢ ì‚¬íšŒì  í”¼ë¡œ: ëª¨ì„ì´ ì—°ì†ë˜ë©´ íšŒë³µ ì‹œê°„ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ì •ì— â€˜í˜¼ì ì‹œê°„â€™ì´ ì—†ìœ¼ë©´ ì„±ê³¼ê°€ ë¹ ë¥´ê²Œ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.");
    } else if (E>=70){
      lines.push("â€¢ ê³¼ì‰ ìƒí˜¸ì‘ìš©: ì‚¬ëŒì„ ë§ì´ ë§Œë‚˜ë©´ ì—ë„ˆì§€ê°€ ì˜¤ë¥´ì§€ë§Œ, ê¹Šì€ ì •ë¦¬ ì‹œê°„ì´ ë¶€ì¡±í•˜ë©´ íŒë‹¨ì˜ ì§ˆì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ì •ë¦¬ ì‹œê°„ ë¸”ë¡â€™ì„ ì¼ì •ì— ê³ ì •í•´ ë³´ì„¸ìš”.");
    }

    lines.push(`ìš”ì•½í•˜ë©´, í˜„ì¬ í”„ë¡œí•„(â€œ${style.title}â€)ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê±´ê°• ì „ëµì€ â€œì»¨ë””ì…˜(ìˆ˜ë©´/ì‹ì‚¬/ìš´ë™) + ê²½ê³„ì„ (ì‹œê°„/ìš”ì²­/ê¸°ì¤€)â€ì„ ë™ì‹œì— ê´€ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ë‘ ì¶•ì´ ìœ ì§€ë˜ë©´ ê°•ì ì€ ë” ì„ ëª…í•´ì§€ê³ , ì•½ì ì€ ìë™ìœ¼ë¡œ ì™„í™”ë©ë‹ˆë‹¤.`);
    return lines.join("\n\n");
  }

  function developmentSuggestions(pct, lv, style){
    const O=pct.O, C=pct.C, E=pct.E, A=pct.A, N=pct.N;
    const lines = [];
    lines.push("ì•„ë˜ ì œì–¸ì€ â€˜ì‘ê²Œ ì‹œì‘í•´ì„œ ë°˜ë³µìœ¼ë¡œ êµ³íˆëŠ”â€™ ë°©ì‹ìœ¼ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. í•˜ë£¨ 5~10ë¶„ ì •ë„ì˜ ë¯¸ì„¸ ë£¨í‹´ë¶€í„° ì ìš©í•´ ë³´ì„¸ìš”.");

    // C ë‚®ìœ¼ë©´ êµ¬ì¡° ì œì•ˆ, ë†’ìœ¼ë©´ ì™„ë²½ì£¼ì˜ ì™„í™”
    if (C<40){
      lines.push("1) ì˜¤ëŠ˜ì˜ 3ê°œ ì²´í¬ë¦¬ìŠ¤íŠ¸: â€˜ê°€ì¥ ì¤‘ìš”í•œ 1ê°œ + ì‰¬ìš´ 1ê°œ + ì •ë¦¬ 1ê°œâ€™ë§Œ ì ê³ , ë‚˜ë¨¸ì§€ëŠ” ê³¼ê°íˆ ë²„ë¦½ë‹ˆë‹¤. ì²´í¬ê°€ ìŒ“ì´ë©´ ì„±ì‹¤ì„±ì€ ìë™ìœ¼ë¡œ ë”°ë¼ì˜µë‹ˆë‹¤.");
      lines.push("2) 5ë¶„ ì°©ìˆ˜ ê·œì¹™: ì‹œì‘ì´ ì–´ë ¤ìš´ ì¼ì€ â€˜5ë¶„ë§Œâ€™ í•˜ê³  ë©ˆì¶°ë„ ë©ë‹ˆë‹¤. ë‡ŒëŠ” ì‹œì‘ í›„ì— ë™ê¸°ê°€ ìƒê¸°ê¸° ë•Œë¬¸ì—, ì´ ê·œì¹™ì´ ë¯¸ë£¨ê¸°ë¥¼ í¬ê²Œ ì¤„ì…ë‹ˆë‹¤.");
    } else if (C>=70){
      lines.push("1) â€˜ì™„ë£Œ ìš°ì„ â€™ ê¸°ì¤€: ì™„ë²½ì„ 100ì´ë¼ë©´ 70ì—ì„œ ì œì¶œ/ê³µìœ í•˜ê³  í”¼ë“œë°±ìœ¼ë¡œ ë‹¤ë“¬ìŠµë‹ˆë‹¤. ì„±ì‹¤í•¨ì„ â€˜ì†ë„â€™ë¡œ ì „í™˜í•˜ëŠ” ì—°ìŠµì…ë‹ˆë‹¤.");
      lines.push("2) ì£¼ 1íšŒ â€˜í•˜ì§€ ì•Šì„ ê²ƒâ€™ ëª©ë¡: í•  ì¼ì„ ëŠ˜ë¦¬ëŠ” ëŒ€ì‹ , ì´ë²ˆ ì£¼ì— í•˜ì§€ ì•Šì„ ê²ƒì„ 3ê°œ ì ìŠµë‹ˆë‹¤. ê¸°ì¤€ì€ ìœ ì§€í•˜ë˜ ì†Œì§„ì„ ì¤„ì´ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.");
    } else {
      lines.push("1) ì‹œì‘ ì „ 1ë¶„ ì„¤ê³„: ì‘ì—… ì „ â€˜ëª©í‘œ 1ì¤„Â·ë‹¤ìŒ í–‰ë™ 1ì¤„â€™ë§Œ ì ìŠµë‹ˆë‹¤. êµ¬ì¡°ë¥¼ ê³¼í•˜ê²Œ ë§Œë“¤ì§€ ì•Šìœ¼ë©´ì„œ ì¶”ì§„ë ¥ì„ ì˜¬ë¦´ ìˆ˜ ìˆì–´ìš”.");
      lines.push("2) ì£¼ê°„ íšŒê³  10ë¶„: í•œ ì£¼ì— í•œ ë²ˆ, ì˜ëœ ê²ƒ 2ê°œÂ·ì•„ì‰¬ìš´ ê²ƒ 1ê°œÂ·ë‹¤ìŒ ì£¼ ì‹¤í—˜ 1ê°œë§Œ ê¸°ë¡í•©ë‹ˆë‹¤.");
    }

    // N ë†’ìœ¼ë©´ ì •ì„œ ë£¨í‹´, ë‚®ìœ¼ë©´ ë¦¬ìŠ¤í¬ ì ê²€
    if (N>=70){
      lines.push("3) ê±±ì • ì‹œê°„ 10ë¶„(íƒ€ì´ë¨¸): ê±±ì •ì´ ì˜¬ë¼ì˜¤ë©´ â€˜ì§€ê¸ˆì€ ê±±ì • ì‹œê°„â€™ìœ¼ë¡œ ì˜®ê¸°ê³ , 10ë¶„ ë™ì•ˆë§Œ ì ìŠµë‹ˆë‹¤. 10ë¶„ ë’¤ì—ëŠ” â€˜ë‹¤ìŒ í–‰ë™ 1ê°œâ€™ë§Œ ë‚¨ê¸°ê³  ì¢…ë£Œí•©ë‹ˆë‹¤.");
      lines.push("4) ëª¸-ë¨¼ì € ì•ˆì • ë£¨í‹´: ë¶ˆì•ˆì´ ì˜¬ë¼ì˜¬ ë•ŒëŠ” ìƒê°ìœ¼ë¡œ í•´ê²°í•˜ë ¤ê³  í•˜ë©´ ë” ì»¤ì§ˆ ìˆ˜ ìˆì–´ìš”. 4ì´ˆ ë“¤ìˆ¨-6ì´ˆ ë‚ ìˆ¨ì„ 5íšŒ(1ë¶„)ë§Œ í•´ë„ ì‹ ì²´ ì‹ í˜¸ê°€ ë‚´ë ¤ê°‘ë‹ˆë‹¤.");
    } else if (N<40){
      lines.push("3) ìµœì•…ì˜ ê²½ìš° 3ë¶„ ì ê²€: ë‚™ê´€ì´ ê°•ì ì´ì§€ë§Œ, í° ê²°ì •ì—ì„œëŠ” â€˜ë§í•  ìˆ˜ ìˆëŠ” 3ê°€ì§€â€™ë¥¼ 3ë¶„ë§Œ ì ì–´ë³´ì„¸ìš”. ê³¼ë„í•œ ë¶ˆì•ˆ ì—†ì´ ì•ˆì •ì„±ì„ ì–»ìŠµë‹ˆë‹¤.");
      lines.push("4) íšŒë³µë ¥ ìœ ì§€ ì¥ì¹˜: ì»¨ë””ì…˜ì´ ì¢‹ì•„ì„œ ê°•ì ì´ ì˜ ë‚˜ì˜¤ëŠ” íƒ€ì…ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìˆ˜ë©´/ì‹ì‚¬ë§Œ í”ë“¤ë ¤ë„ ì²´ê°ì´ ë‹¬ë¼ì§€ë‹ˆ, ê¸°ë³¸ ë£¨í‹´ì„ â€˜ê³ ì •â€™í•´ë‘ëŠ” ê²Œ í•µì‹¬ì…ë‹ˆë‹¤.");
    } else {
      lines.push("3) ê°ì •-ì‚¬ì‹¤ ë¶„ë¦¬ ë©”ëª¨: ë¶ˆí¸í•¨ì´ ìƒê¸°ë©´ â€˜ì‚¬ì‹¤(ë¬´ìŠ¨ ì¼ì´ ìˆì—ˆë‚˜)â€™ê³¼ â€˜í•´ì„(ë‚´ê°€ ì–´ë–»ê²Œ ëŠê¼ˆë‚˜)â€™ì„ ë¶„ë¦¬í•´ 3ì¤„ë¡œ ì ìŠµë‹ˆë‹¤. ìƒê°ì´ ì •ë¦¬ë˜ë©´ì„œ ë¶ˆí•„ìš”í•œ ê°ì • ì†Œëª¨ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.");
    }

    // E/Aì— ë”°ë¥¸ ì†Œí†µ ì „ëµ
    if (E<40){
      lines.push("5) ì†Œí†µì€ ê¸€ë¡œ ë¨¼ì €: íšŒì˜ ì „ 3ì¤„(ëª©í‘œ/ê·¼ê±°/ìš”ì²­)ì„ ë©”ì‹ ì €ë‚˜ ë¬¸ì„œë¡œ ë‚¨ê¸°ë©´, ë§ë³´ë‹¤ í¸í•˜ê²Œ ì˜í–¥ë ¥ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    } else if (E>=70){
      lines.push("5) ë§í•˜ê¸° ì „ â€˜í•œ ë¬¸ì¥ ê²°ë¡ â€™: ì—ë„ˆì§€ê°€ ë†’ì„ìˆ˜ë¡ ë§ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. ê²°ë¡  1ë¬¸ì¥ â†’ ê·¼ê±° 2ê°œ â†’ ìš”ì²­ 1ê°œë¡œ ì •ë¦¬í•˜ë©´ ì„¤ë“ë ¥ì´ ìƒìŠ¹í•©ë‹ˆë‹¤.");
    } else {
      lines.push("5) ì§ˆë¬¸ 1ê°œ ìŠµê´€: ë‚¯ì„  ìë¦¬ì—ì„œëŠ” â€˜ë¨¼ì € ì§ˆë¬¸ 1ê°œâ€™ë¥¼ ë˜ì§€ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”ê°€ ì´ì–´ì§€ê³  ë¶€ë‹´ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.");
    }

    if (A>=70){
      lines.push("6) ê±°ì ˆ í…œí”Œë¦¿: â€œì§€ê¸ˆì€ ì–´ë µì§€ë§Œ, (ê°€ëŠ¥ ì‹œê°„/ëŒ€ì•ˆ)ì„ ì œì•ˆí• ê²Œ.â€ë¥¼ ë¯¸ë¦¬ ë¬¸ì¥ìœ¼ë¡œ ì €ì¥í•´ë‘ì„¸ìš”. ë°°ë ¤ë¥¼ ìƒì§€ ì•Šê³  ê²½ê³„ë¥¼ ì„¸ìš°ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.");
    } else if (A<40){
      lines.push("6) ì¸ì • 1ë¬¸ì¥ + ìš”ì²­ 1ë¬¸ì¥: â€œì—¬ê¸°ê¹Œì§€ í•´ì¤€ ì ì€ ê³ ë§ˆì›Œ. ë‹¤ìŒì—” (êµ¬ì²´ ìš”ì²­)ìœ¼ë¡œ ë§ì¶°ë³´ì.â€ êµ¬ì¡°ë¡œ ë§í•˜ë©´ ê´€ê³„ ë¹„ìš©ì´ í¬ê²Œ ì¤„ì–´ë“­ë‹ˆë‹¤.");
    } else {
      lines.push("6) í•©ì˜ì˜ ê¸°ë¡: ë§ë¡œ ëë‚´ì§€ ë§ê³  â€œìš°ë¦¬ê°€ í•©ì˜í•œ 2ê°€ì§€â€ë¥¼ ì±„íŒ…ì— ë‚¨ê¸°ë©´ ë¶ˆí•„ìš”í•œ ì˜¤í•´ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.");
    }

    // Oì— ë”°ë¥¸ ì„±ì¥ ë£¨í‹´
    if (O>=70){
      lines.push("7) ì›” 1íšŒ â€˜ì‘ì€ ì‹¤í—˜â€™: ìƒˆ ë„êµ¬/ìƒˆ ë°©ì‹/ìƒˆ ìŠµê´€ì„ 1ê°œë§Œ ê³¨ë¼ 2ì£¼ ì‹¤í—˜í•´ ë³´ì„¸ìš”. ê°œë°©ì„±ì˜ ê°•ì ì„ â€˜ê²½í—˜ì  í•™ìŠµâ€™ìœ¼ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.");
    } else if (O<40){
      lines.push("7) ë³€í™”ëŠ” â€˜íŒŒì¼ëŸ¿â€™ë¡œ: í° ë³€í™”ë³´ë‹¤ 10%ë§Œ ë°”ê¾¸ëŠ” íŒŒì¼ëŸ¿ì„ ê¶Œí•©ë‹ˆë‹¤. ì˜ˆ: ìƒˆë¡œìš´ ë°©ì‹ì€ ì¼ì£¼ì¼ë§Œ ì‹œí—˜í•˜ê³ , ê²°ê³¼ê°€ ì¢‹ìœ¼ë©´ í™•ëŒ€í•©ë‹ˆë‹¤.");
    } else {
      lines.push("7) íƒìƒ‰-ìˆ˜ë ´ ë¦¬ë“¬: ì¼ë‹¨ ì°¾ì•„ë³´ê³ (íƒìƒ‰) ë°”ë¡œ ì •ë¦¬í•´ ì ìš©(ìˆ˜ë ´)í•˜ëŠ” 2ë‹¨ê³„ë¥¼ ì˜ì‹ì ìœ¼ë¡œ ë¶„ë¦¬í•˜ë©´ ì„±ê³¼ê°€ ì¢‹ì•„ì§‘ë‹ˆë‹¤.");
    }

    lines.push(`ë§ˆì§€ë§‰ìœ¼ë¡œ, ë‹¹ì‹ ì˜ í”„ë¡œí•„(â€œ${style.title}â€)ì€ â€˜ê°•ì ì„ ì“°ëŠ” ë°©ì‹â€™ì„ ì¡°ê¸ˆë§Œ ë‹¤ë“¬ì–´ë„ ì²´ê° ë³€í™”ê°€ í° í¸ì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤. ìœ„ ì œì–¸ ì¤‘ ê°€ì¥ ë¶€ë‹´ ì—†ëŠ” 1ê°œë§Œ ê³¨ë¼ 7ì¼ ì—°ì†ìœ¼ë¡œ í•´ë³´ì„¸ìš”. ì„±ê²©ì€ ì˜ì§€ê°€ ì•„ë‹ˆë¼ â€˜ë°˜ë³µëœ ì„ íƒâ€™ìœ¼ë¡œ ë°”ë€ë‹ˆë‹¤.`);

    return lines.join("\n\n");
  }

  // ====== ì €ì¥/ë³µì› (ë¡œì»¬ìŠ¤í† ë¦¬ì§€) ======
  const LS_KEY = "big5_singlefile_answers_v1";

  function persistAnswers(){
    const data = {};
    for (const q of QUESTIONS){
      const c = $(`input[name="q${q.id}"]:checked`);
      if (c) data[q.id] = Number(c.value);
    }
    try{
      localStorage.setItem(LS_KEY, JSON.stringify(data));
    }catch(_){}
  }

  function restoreAnswers(){
    let data = null;
    try{
      data = JSON.parse(localStorage.getItem(LS_KEY) || "null");
    }catch(_){ data=null; }

    if (!data) return;

    for (const q of QUESTIONS){
      const v = data[q.id];
      if (v>=1 && v<=5){
        const input = $(`input[name="q${q.id}"][value="${v}"]`);
        if (input){
          input.checked = true;
          const box = input.closest(".qItem");
          if (box){
            $$(".opt", box).forEach(l => l.classList.remove("selected"));
            const selectedLabel = input.closest("label.opt");
            if (selectedLabel) selectedLabel.classList.add("selected");
          }
        }
      }
    }
  }

  function resetAll(){
    // radios reset
    $$('input[type="radio"]').forEach(r => { r.checked = false; });
    $$(".opt").forEach(l => l.classList.remove("selected"));
    try{ localStorage.removeItem(LS_KEY); }catch(_){}
    resultCard.style.display = "none";
    reportBox.textContent = "";
    updateScoreUI({O:0,C:0,E:0,A:0,N:0});
    updateProgress();
    showToast("ì‘ë‹µì„ ì´ˆê¸°í™”í–ˆì–´ìš”.");
    window.scrollTo({top:0, behavior:"smooth"});
  }

  function autoFillDemo(){
    // ë°ëª¨ìš©: ì•½ê°„ì˜ í¸í–¥ì„ ê°€ì§„ ë¬´ì‘ìœ„
    for (const q of QUESTIONS){
      // traitë³„ë¡œ ê¸°ë³¸ ì„±í–¥ì„ ì¡°ê¸ˆì”© ë‹¤ë¥´ê²Œ
      let base = 3;
      if (q.trait==="C") base = 4;
      if (q.trait==="N") base = 3;
      if (q.trait==="O") base = 4;
      if (q.trait==="A") base = 4;
      if (q.trait==="E") base = 3;

      // ì—­ë¬¸í•­ì´ë©´ ë°˜ëŒ€ë¡œ
      let v = clamp(Math.round(base + (Math.random()*2-1)), 1, 5);
      const input = $(`input[name="q${q.id}"][value="${v}"]`);
      if (input){
        input.checked = true;
        const box = input.closest(".qItem");
        if (box){
          $$(".opt", box).forEach(l => l.classList.remove("selected"));
          const selectedLabel = input.closest("label.opt");
          if (selectedLabel) selectedLabel.classList.add("selected");
        }
      }
    }
    persistAnswers();
    updateProgress();
    showToast("ë°ëª¨ ì‘ë‹µì„ ì±„ì› ì–´ìš”. í•„ìš”í•˜ë©´ ìˆ˜ì •í•˜ê³  ì œì¶œí•˜ì„¸ìš”.");
    const first = $(".qItem");
    if (first) first.scrollIntoView({behavior:"smooth", block:"start"});
  }

  // ====== ì œì¶œ ======
  function submit(){
    if (countAnswered() !== QUESTIONS.length){
      showToast("ì•„ì§ ëª¨ë“  ë¬¸í•­ì— ë‹µí•˜ì§€ ì•Šì•˜ì–´ìš”. ë¹ˆ ë¬¸í•­ì„ ì±„ì›Œì£¼ì„¸ìš”.");
      // ë¹ˆ ë¬¸í•­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
      const firstMissing = QUESTIONS.find(q => !$(`input[name="q${q.id}"]:checked`));
      if (firstMissing){
        const box = $(`.qItem[data-qid="${firstMissing.id}"]`);
        if (box) box.scrollIntoView({behavior:"smooth", block:"center"});
        box?.classList.add("pulse");
      }
      return;
    }

    const scores = computeScores();
    if (!scores){
      showToast("ì ìˆ˜ ê³„ì‚° ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
      return;
    }

    updateScoreUI(scores.pct);

    const {report, stamp, style} = buildReport(scores);
    reportBox.textContent = report;
    resultMeta.textContent = `í”„ë¡œí•„: ${style.title} Â· ìƒì„±: ${stamp}`;
    resultCard.style.display = "block";

    showToast("ì‹¬ì¸µ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í–ˆì–´ìš”.");
    resultCard.scrollIntoView({behavior:"smooth", block:"start"});
  }

  // ====== ë²„íŠ¼ ======
  $("#btnSubmit").addEventListener("click", submit);
  $("#btnReset").addEventListener("click", resetAll);
  $("#btnAutofill").addEventListener("click", autoFillDemo);

  $("#btnCopy").addEventListener("click", async () => {
    const text = reportBox.textContent || "";
    try{
      await navigator.clipboard.writeText(text);
      showToast("ë¦¬í¬íŠ¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆì–´ìš”.");
    }catch(_){
      // fallback
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      showToast("ë¦¬í¬íŠ¸ë¥¼ ë³µì‚¬í–ˆì–´ìš”.");
    }
  });

  $("#btnDownloadTxt").addEventListener("click", () => {
    const text = reportBox.textContent || "";
    const blob = new Blob([text], {type:"text/plain;charset=utf-8"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "big5_report.txt";
    document.body.appendChild(a);
    a.click();
    URL.revokeObjectURL(a.href);
    a.remove();
  });

  $("#btnPrint").addEventListener("click", () => {
    // ê°„ë‹¨ ì¸ì‡„: ë¦¬í¬íŠ¸ë§Œ ë³´ê¸° ì¢‹ê²Œ
    const content = reportBox.textContent || "";
    const w = window.open("", "_blank");
    if (!w) { showToast("íŒì—…ì´ ì°¨ë‹¨ë˜ì–´ ì¸ì‡„ ì°½ì„ ì—´ ìˆ˜ ì—†ì–´ìš”."); return; }
    w.document.write(`
      <html><head><meta charset="utf-8" /><title>Big Five ë¦¬í¬íŠ¸ ì¸ì‡„</title>
      <style>
        body{font-family: system-ui, -apple-system, "Apple SD Gothic Neo","Noto Sans KR", sans-serif; line-height:1.6; padding:24px;}
        pre{white-space:pre-wrap; font-size:13.5px;}
        h1{font-size:18px;margin:0 0 10px;}
        .muted{color:#555;font-size:12px;margin-bottom:14px;}
      </style></head><body>
      <h1>Big Five ì„±ê²© ê²€ì‚¬ ë¦¬í¬íŠ¸</h1>
      <div class="muted">ì´ ë¬¸ì„œëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ìƒì„±ëœ ê²°ê³¼ë¥¼ ì¸ì‡„í•œ ê²ƒì…ë‹ˆë‹¤.</div>
      <pre>${escapeHtml(content)}</pre>
      </body></html>
    `);
    w.document.close();
    w.focus();
    w.print();
  });

  // ====== HTML escape ======
  function escapeHtml(s){
    return String(s)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // ====== ì´ˆê¸°í™” ======
  renderQuestions();
  renderScoresEmpty();
  restoreAnswers();
  updateProgress();

  // ë³µì›ëœ ë‹µì´ ìˆìœ¼ë©´ ìš”ì•½ë„ ê°±ì‹ 
  if (countAnswered() === QUESTIONS.length){
    const scores = computeScores();
    if (scores) updateScoreUI(scores.pct);
  } else {
    updateScoreUI({O:0,C:0,E:0,A:0,N:0});
  }

})();
</script>
</body>
</html>
